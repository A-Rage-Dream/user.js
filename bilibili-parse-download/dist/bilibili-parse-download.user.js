// ==UserScript==
// @name          bilibili视频下载
// @namespace     https://github.com/injahow
// @version       2.1.0
// @description   支持Web、RPC、Blob、Aria等下载方式；支持flv、dash、mp4视频格式；支持下载港区番剧；支持会员下载；支持换源播放，自动切换为高清视频源
// @author        injahow
// @copyright     2021, injahow (https://github.com/injahow)
// @license       MIT
// @source        https://github.com/injahow/user.js
// @supportURL    https://github.com/injahow/user.js/issues
// @downloadURL   https://greasyfork.org/scripts/413228-bilibili%E8%A7%86%E9%A2%91%E4%B8%8B%E8%BD%BD/code/bilibili%E8%A7%86%E9%A2%91%E4%B8%8B%E8%BD%BD.user.js
// @updateURL     https://greasyfork.org/scripts/413228-bilibili%E8%A7%86%E9%A2%91%E4%B8%8B%E8%BD%BD/code/bilibili%E8%A7%86%E9%A2%91%E4%B8%8B%E8%BD%BD.user.js
// @match         *://www.bilibili.com/video/av*
// @match         *://www.bilibili.com/video/BV*
// @match         *://www.bilibili.com/medialist/play/*
// @match         *://www.bilibili.com/bangumi/play/ep*
// @match         *://www.bilibili.com/bangumi/play/ss*
// @match         *://www.bilibili.com/cheese/play/ep*
// @match         *://www.bilibili.com/cheese/play/ss*
// @match         https://www.mcbbs.net/template/mcbbs/image/special_photo_bg.png*
// @require       https://static.hdslb.com/js/jquery.min.js
// @require       https://cdn.jsdelivr.net/npm/flv.js@1.6.2/dist/flv.min.js
// @require       https://cdn.jsdelivr.net/npm/dplayer@1.26.0/dist/DPlayer.min.js
// @icon          https://static.hdslb.com/images/favicon.ico
// @compatible    chrome
// @compatible    firefox
// @grant         none
// ==/UserScript==
/* eslint-disable */ /* spell-checker: disable */
// @[ You can find all source codes in GitHub repo ]
!function(){"use strict";var e={44:function(e,t,n){n.r(t),n.d(t,{config:function(){return o},hostMap:function(){return i}});var o={base_api:"https://api.injahow.cn/bparse/",request_type:"auto",format:"flv",host_key:"0",replace_force:"0",auth:"0",download_type:"web",rpc_domain:"http://localhost",rpc_port:"16800",rpc_token:"",rpc_dir:"D:/",ariang_host:"http://ariang.injahow.com/",auto_download:"0",danmaku_speed:"15",danmaku_fontsize:"22"},i={0:"关闭",ks3:"upos-sz-mirrorks3.bilivideo.com",ks3b:"upos-sz-mirrorks3b.bilivideo.com",ks3c:"upos-sz-mirrorks3c.bilivideo.com",ks32:"upos-sz-mirrorks32.bilivideo.com",kodo:"upos-sz-mirrorkodo.bilivideo.com",kodob:"upos-sz-mirrorkodob.bilivideo.com",cos:"upos-sz-mirrorcos.bilivideo.com",cosb:"upos-sz-mirrorcosb.bilivideo.com",bos:"upos-sz-mirrorbos.bilivideo.com",wcs:"upos-sz-mirrorwcs.bilivideo.com",wcsb:"upos-sz-mirrorwcsb.bilivideo.com",hw:"upos-sz-mirrorhw.bilivideo.com",hwb:"upos-sz-mirrorhwb.bilivideo.com",upbda2:"upos-sz-upcdnbda2.bilivideo.com",upws:"upos-sz-upcdnws.bilivideo.com",uptx:"upos-sz-upcdntx.bilivideo.com",uphw:"upos-sz-upcdnhw.bilivideo.com",js:"upos-tf-all-js.bilivideo.com",hk:"cn-hk-eq-bcache-01.bilivideo.com",akamai:"upos-hz-mirrorakam.akamaized.net"}},770:function(e,t,n){var o=n(81),i=n.n(o),r=n(645),a=n.n(r)()(i());a.push([e.id,"\n#bp_config[data-v-1c84ca4a] {\n  opacity: 0;\n  display: none;\n  position: fixed;\n  inset: 0px;\n  top: 0px;\n  left: 0px;\n  width: 100%;\n  height: 100%;\n  z-index: 10000;\n}\n.bp_config_bg[data-v-1c84ca4a] {\n  position: absolute;\n  background: rgb(255, 255, 255);\n  border-radius: 10px;\n  padding: 20px;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 600px;\n  box-shadow: rgb(0 0 0 / 70%) 0px 0px 0px 1000px;\n}\n.setting-button[data-v-1c84ca4a] {\n  width: 120px;\n  height: 40px;\n  border-width: 0px;\n  border-radius: 3px;\n  background: #1e90ff;\n  cursor: pointer;\n  outline: none;\n  color: white;\n  font-size: 17px;\n}\n.setting-button[data-v-1c84ca4a]:hover {\n  background: #5599ff;\n}\n.setting-context[data-v-1c84ca4a] {\n  margin: 0 1%;\n  color: blue;\n}\n.setting-context[data-v-1c84ca4a]:hover {\n  color: red;\n}\n",""]),t.Z=a},645:function(e){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",o=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),o&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),o&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,o,i,r){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(o)for(var l=0;l<this.length;l++){var c=this[l][0];null!=c&&(a[c]=!0)}for(var s=0;s<e.length;s++){var u=[].concat(e[s]);o&&a[u[0]]||(void 0!==r&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=r),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),t.push(u))}},t}},81:function(e){e.exports=function(e){return e[1]}},379:function(e){var t=[];function n(e){for(var n=-1,o=0;o<t.length;o++)if(t[o].identifier===e){n=o;break}return n}function o(e,o){for(var r={},a=[],l=0;l<e.length;l++){var c=e[l],s=o.base?c[0]+o.base:c[0],u=r[s]||0,d="".concat(s," ").concat(u);r[s]=u+1;var p=n(d),f={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)t[p].references++,t[p].updater(f);else{var h=i(f,o);o.byIndex=l,t.splice(l,0,{identifier:d,updater:h,references:1})}a.push(d)}return a}function i(e,t){var n=t.domAPI(t);n.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var r=o(e=e||[],i=i||{});return function(e){e=e||[];for(var a=0;a<r.length;a++){var l=n(r[a]);t[l].references--}for(var c=o(e,i),s=0;s<r.length;s++){var u=n(r[s]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}r=c}}},569:function(e){var t={};e.exports=function(e,n){var o=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},216:function(e){e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:function(e,t,n){e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:function(e){e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,i&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:function(e){e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},744:function(e,t){t.Z=(e,t)=>{const n=e.__vccOpts||e;for(const[e,o]of t)n[e]=o;return n}}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var r=t[o]={id:o,exports:{}};return e[o](r,r.exports,n),r.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e=n(44);function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var o=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.prefix="bp_"}var n,o,i;return n=e,(o=[{key:"get",value:function(e){return localStorage.getItem(this.prefix+(e||""))||""}},{key:"set",value:function(e,t){return localStorage.setItem(this.prefix+(e||""),t)}}])&&t(n.prototype,o),i&&t(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}());var i={show:function(){$("div#bp_config").is(":hidden")&&$("div#message_box").is(":hidden")&&$("body").css("overflow","auto")},hide:function(){$("body").css("overflow","hidden")}};function r(e,t){"confirm"===t?$('div.message_box_btn button[name="cancel"]').show():"alert"===t&&$('div.message_box_btn button[name="cancel"]').hide(),e.html?$("div#message_box_context").html('<div style="font-size:18px">'.concat(e.html,"</div>")):$("div#message_box_context").html('<div style="font-size:18px">╰(￣▽￣)╮</div>'),i.hide(),$("#message_box").show(),$("div#message_box").animate({opacity:"1"},300),$('div.message_box_btn button[name="affirm"]')[0].onclick=function(){$("div#message_box").hide(),$("div#message_box").css("opacity",0),i.show(),e.callback&&e.callback.affirm&&e.callback.affirm()},$('div.message_box_btn button[name="cancel"]')[0].onclick=function(){$("div#message_box").hide(),$("div#message_box").css("opacity",0),i.show(),e.callback&&e.callback.cancel&&e.callback.cancel()}}var a=0;function l(e,t){(function(e,t){$("div.message-bg").append(e),$("div#message-".concat(t)).animate({"margin-top":"+=70px",opacity:"1"},300)})('<div id="message-'.concat(a+=1,'" class="message message-').concat(t,'"><div class="message-context"><p><strong>').concat(t,"：</strong></p><p>").concat(e,"</p></div></div>"),a),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;setTimeout((function(){var t="div#message-".concat(e);$(t).animate({"margin-top":"-=70px",opacity:"0"},300,(function(){$(t).remove()}))}),1e3*t)}(a,3)}var c=function(e){return l(e,"success")},s=function(e){return l(e,"warning")},u=function(e){return l(e,"danger")},d=function(e){return l(e,"info")},p=function(e){return l("(^・ω・^)~喵喵喵~","info")},f=function(e,t){return r({html:e,callback:{affirm:t}},"alert")},h=function(e,t,n){return r({html:e,callback:{affirm:t,cancel:n}},"confirm")};function v(e){return new Promise((function(t,n){e.success=function(e){e.code&&s("".concat(e.message||"CODE:".concat(e.code))),t(e)},e.error=function(e){u("网络异常"),n(e)},$.ajax(e)}))}function _(){return location.pathname.match("/cheese/play/")?"cheese":location.pathname.match("/medialist/play/")?"medialist":window.__INITIAL_STATE__?window.__INITIAL_STATE__.epInfo?"bangumi":window.__INITIAL_STATE__.videoData?"video":void 0:"?"}var m={"1080P 高码率":112,"1080P 高清":80,"720P 高清":64,"480P 清晰":32,"360P 流畅":16,"自动":64};var g={type:_,base:function(){var e=_();if("video"===e){var t=window.__INITIAL_STATE__;return{type:"video",total:function(){return t.videoData.pages.length||1},title:function(e){var n=e||t.p||1;return(t.videoData.pages[n-1].part||"unknown").replace(/[\/\\:*?"<>|]+/g,"")},filename:function(e){var n=e||t.p||1;return((t.videoData&&t.videoData.title||"unknown")+" P".concat(n," （").concat(t.videoData.pages[n-1].part||n,"）")).replace(/[\/\\:*?"<>|]+/g,"")},aid:function(e){return t.videoData.aid},p:function(){return t.p||1},cid:function(e){var n=e||t.p||1;return t.videoData.pages[n-1].cid},epid:function(e){return""},need_vip:function(){return!1},vip_need_pay:function(){return!1},is_limited:function(){return!1}}}if("medialist"===e){var n=$("div.player-auxiliary-playlist-item"),o=$("div.player-auxiliary-playlist-item.player-auxiliary-playlist-item-active").index(),i=$(".player-auxiliary-playlist-top .player-auxiliary-filter-title").html();return{type:"video",total:function(){return n.length},title:function(e){var t=e?e-1:o,i=n.eq(t).find(".player-auxiliary-playlist-item-title").attr("title")||"unknown";return i.replace(/[\/\\:*?"<>|]+/g,"")},filename:function(e){var t=e?e-1:o,r=n.eq(t).find(".player-auxiliary-playlist-item-title").attr("title")||"unknown";return"".concat(i," P").concat(t+1," （").concat(r,"）").replace(/[\/\\:*?"<>|]+/g,"")},aid:function(e){var t=e?e-1:o;return n.eq(t).attr("data-aid")},p:function(){return o+1},cid:function(e){var t=e?e-1:o;return n.eq(t).attr("data-cid")},epid:function(e){return""},need_vip:function(){return!1},vip_need_pay:function(){return!1},is_limited:function(){return!1}}}if("bangumi"===e){var r=window.__INITIAL_STATE__;return{type:"bangumi",total:function(){return r.epList.length},title:function(e){var t=e?r.epList[e-1]:r.epInfo;return("".concat(t.titleFormat," ").concat(t.longTitle)||"unknown").replace(/[\/\\:*?"<>|]+/g,"")},filename:function(e){if(e){var t=r.epList[e-1];return("".concat(r.mediaInfo.season_title,"：").concat(t.titleFormat," ").concat(t.longTitle)||"unknown").replace(/[\/\\:*?"<>|]+/g,"")}return(r.h1Title||"unknown").replace(/[\/\\:*?"<>|]+/g,"")},aid:function(e){return e?r.epList[e-1].aid:r.epInfo.aid},p:function(){return r.epInfo.i||1},cid:function(e){return e?r.epList[e-1].cid:r.epInfo.cid},epid:function(e){return e?r.epList[e-1].id:r.epInfo.id},need_vip:function(){return"会员"===r.epInfo.badge},vip_need_pay:function(){return r.epPayMent.vipNeedPay},is_limited:function(){return r.userState.areaLimit}}}if("cheese"===e){var a=(location.href.match(/\/cheese\/play\/ep(\d+)/i)||["",""])[1];window.bp_episodes||(window.bp_episodes=[],x.get_season(a));var l=window.bp_episodes,c=$("li.on.list-box-li").index();return{type:"cheese",total:function(){return l.length},title:function(e){return(l[e?e-1:c].title||"unknown").replace(/[\/\\:*?"<>|]+/g,"")},filename:function(e){var t=e?e-1:c;return"".concat($("div.season-info h1").html()," P").concat(t+1," （").concat(l[t].title||"unknown","）").replace(/[\/\\:*?"<>|]+/g,"")},aid:function(e){return l[e?e-1:c].aid},p:function(){return c+1},cid:function(e){return l[e?e-1:c].cid},epid:function(e){return l[e?e-1:c].id},need_vip:function(){return!1},vip_need_pay:function(){return!1},is_limited:function(){return!1}}}return{type:"?",total:function(){return 0},title:function(e){return""},filename:function(e){return""},aid:function(e){return""},p:function(){return 1},cid:function(e){return""},epid:function(e){return""},need_vip:function(){return!1},vip_need_pay:function(){return!1},is_limited:function(){return!1}}},get_quality:function(){var e=0,t=0;return $("li.bui-select-item")[0]&&(t=parseInt($("li.bui-select-item")[0].dataset.value))?e=parseInt($("li.bui-select-item.bui-select-item-active").attr("data-value"))||(t>80?80:t):$("li.squirtle-select-item")[0]&&(t=parseInt($("li.squirtle-select-item")[0].dataset.value))?e=parseInt($("li.squirtle-select-item.active").attr("data-value"))||(t>80?80:t):$("div.edu-player-quality-item")[0]?(e=m[$("div.edu-player-quality-item.active span").text()||"自动"]||80,t=m[$("div.edu-player-quality-item span").text()||"自动"]||80):e=t=80,{q:e,q_max:t}},get_quality_support:function(){var e,t=[];return"cheese"===_()?((e=$("div.edu-player-quality-item span")).each((function(){if("自动"===$(this).text())return!1;t.push(m[$(this).text()])})),t.length?t:["80","64","32","16"]):($("ul.squirtle-select-list")[0]?e=$("li.squirtle-select-item"):$("ul.bui-select-list")[0]&&(e=$("li.bui-select-item")),e&&e.length?(e.each((function(){var e="".concat($(this).attr("data-value"));if("0"===e)return!1;t.push(e)})),t):["80","64","32","16"])}};function b(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw r}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function w(t,n,i,r,a,l){var c,s;c="function"==typeof r?function(e){r(e)}:function(e){return console.log(e)},s="function"==typeof a?function(e){u("请求失败"),a(e)}:function(e){return console.error(e)};var d=g.base(),p=[d.aid(t),d.cid(t),d.epid(t),n||g.get_quality().q,d.type],f=p[0],h=p[1],_=p[2],m=p[3],b=p[4],y=i||e.config.format;"mp4"===y&&"video"!==b&&(y="flv");var x,k=function(t){if("0"!==e.config.host_key&&"online"===l&&"mp4"!==y){var n=t.split("/");n[2]=e.hostMap[e.config.host_key],t=n.join("/")}return t},S={type:"GET",dataType:"json"};if("auto"===l||"local"===l){var $,C;"cheese"!==b?(x="https://api.bilibili.com/x/player/playurl","dash"===y?($=0,C=80):($=0,C=0)):(x="https://api.bilibili.com/pugv/player/web/playurl","dash"===y?($=0,C=80):($=1,C=80)),x+="?avid=".concat(f,"&cid=").concat(h,"&qn=").concat(m,"&fnver=").concat($,"&fnval=").concat(C,"&fourk=1&ep_id=").concat(_,"&type=").concat(y,"&otype=json"),x+="mp4"===y?"&platform=html5&high_quality=1":"",S.xhrFields={withCredentials:!0}}else{x=e.config.base_api,x+="?av=".concat(f,"&cid=").concat(h,"&q=").concat(m,"&ep=").concat(_,"&type=").concat(b,"&format=").concat(y,"&otype=json");var O=[o.get("auth_id"),o.get("auth_sec")],T=O[0],E=O[1];"1"===e.config.auth&&T&&E&&(x+="&auth_id=".concat(T,"&auth_sec=").concat(E),t&&(x+="&s"))}S.url=x,v(S).then((function(e){var o;if(e.code||(o=e.result||e.data),!o)return"auto"===l?void w(t,n,i,r,a,"online"):(e.url&&(e.url=k(e.url)),e.video&&(e.video=k(e.video)),e.audio&&(e.audio=k(e.audio)),void c(e));if(o.dash){for(var s={code:0,quality:o.quality,accept_quality:o.accept_quality,video:"",audio:""},u=o.dash.video,d=0;d<u.length;d++){var p=u[d];if(p.id<=m){s.video=k(p.base_url),s.audio=k(o.dash.audio[0].base_url);break}}c(s)}else c({code:0,quality:o.quality,accept_quality:o.accept_quality,url:k(o.durl[0].url)})})).catch((function(e){return s(e)}))}var x={get_url:function(t,n){var o=e.config.request_type;w(0,0,e.config.format,t,n,o)},get_urls:function(t,n,o,i,r){w(t,n,o,i,r,e.config.request_type)},get_subtitle_url:function(e,t){var n=g.base(),o=[n.aid(e),n.cid(e),n.epid(e)],i=o[1],r=o[2];v({url:"https://api.bilibili.com/x/player/v2?aid=".concat(o[0],"&cid=").concat(i,"&ep_id=").concat(r),dataType:"json"}).then((function(e){!e.code&&e.data.subtitle.subtitles[0]?v({url:"".concat(e.data.subtitle.subtitles[0].subtitle_url),dataType:"json"}).then((function(e){var n,o="WEBVTT\n\n",i=b(e.body||[{from:0,to:0,content:""}]);try{for(i.s();!(n=i.n()).done;){var r=n.value,a=new Date(1e3*(parseInt(r.from)-28800)).toTimeString().split(" ")[0]+"."+(r.from.toString().split(".")[1]||"000").padEnd(3,"0"),l=new Date(1e3*(parseInt(r.to)-28800)).toTimeString().split(" ")[0]+"."+(r.to.toString().split(".")[1]||"000").padEnd(3,"0");o+="".concat(a," --\x3e ").concat(l,"\n").concat(r.content.trim(),"\n\n")}}catch(e){i.e(e)}finally{i.f()}t(URL.createObjectURL(new Blob([o],{type:"text/vtt"})))})).catch(t):t()})).catch(t)},get_season:function(e){v({url:"https://api.bilibili.com/pugv/view/web/season?ep_id=".concat(e),xhrFields:{withCredentials:!0},dataType:"json"}).then((function(e){e.code?s("获取剧集信息失败"):window.bp_episodes=e.data.episodes||null}))}};function k(e,t){t?v({url:"https://api.bilibili.com/x/v1/dm/list.so?oid=".concat(t),dataType:"text"}).then((function(t){var n=$(t.replace(/[\x00-\x08\x0b-\x0c\x0e-\x1f\x7f]/g,""));if(n)if(n.find("d")[0]){var o=n.find("d").map((function(e,t){var n=$(t),o=n.attr("p").split(","),i=0;return"4"===o[1]?i=2:"5"===o[1]&&(i=1),[{author:"",time:parseFloat(o[0]),type:i,color:parseInt(o[3]),id:"",text:n.text()}]})).get();e.success(o),setTimeout((function(){T()}),100)}else e.error("未发现弹幕");else e.error("弹幕获取失败")})).catch((function(t){e.error("弹幕请求异常")})):e.error("cid未知，无法获取弹幕")}function S(){return $("bwp-video")[0]?"bwp-video":$('video[class!="dplayer-video dplayer-video-current"]')[0]?'video[class!="dplayer-video dplayer-video-current"]':void 0}function C(){var e=$(S())[0];e&&(e.pause(),e.currentTime=0)}function O(){if(window.bp_dplayer){var e=$(S())[0];e&&e.removeEventListener("play",C,!1),window.bp_dplayer.destroy(),window.bp_dplayer=null,$("#bp_dplayer").remove(),window.bp_dplayer_2&&(window.bp_dplayer_2.destroy(),window.bp_dplayer_2=null,$("#bp_dplayer_2").remove()),$($("#bilibiliPlayer")[0]?"#bilibiliPlayer":$("#bilibili-player")[0]?"#bilibili-player":"cheese"===g.type()?$('div.bpx-player[data-injector="nano"]')[0]?'div.bpx-player[data-injector="nano"]':"#pay-mask":void 0).show()}}function T(){var t=""+'<style id="dplayer_danmaku_style">\n        .dplayer-danmaku .dplayer-danmaku-right.dplayer-danmaku-move {\n            animation-duration: '.concat(parseFloat(e.config.danmaku_speed),"s;\n            font-size: ").concat(parseInt(e.config.danmaku_fontsize),"px;\n        }\n        </style>");$("#dplayer_danmaku_style")[0]&&$("#dplayer_danmaku_style").remove(),$("body").append(t)}var E={bili_video_tag:S,recover_player:O,replace_player:function(t,n){O();var o,i=$(S())[0];C(),i&&i.addEventListener("play",C,!1),$("#bilibiliPlayer")[0]?(o="#bilibiliPlayer",$(o).before('<div id="bp_dplayer" class="bilibili-player relative bilibili-player-no-cursor">'),$(o).hide()):$("#bilibili-player")[0]?(o="#bilibili-player",$(o).before('<div id="bp_dplayer" class="bilibili-player relative bilibili-player-no-cursor" style="width:100%;height:100%;"></div>'),$(o).hide()):"cheese"===g.type()&&($('div.bpx-player[data-injector="nano"]')[0]?($("#pay-mask").hide(),$("#bofqi").show(),o='div.bpx-player[data-injector="nano"]',$(o).before('<div id="bp_dplayer" style="width:100%;height:100%;"></div>'),$(o).hide()):(o="#pay-mask",$(o).html('<div id="bp_dplayer" style="width:100%;height:100%;"></div>'))),$("#player_mask_module").hide(),x.get_subtitle_url(0,(function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(window.bp_dplayer=new DPlayer({container:$("#bp_dplayer")[0],mutex:!1,volume:1,autoplay:!0,video:{url:t,type:"auto"},subtitle:{url:o,type:"webvtt",fontSize:"35px",bottom:"5%",color:"#fff"},danmaku:!0,apiBackend:{read:function(e){k(e,g.base().cid())},send:function(e){e.error("此脚本无法将弹幕同步到云端")}},contextmenu:[{text:"脚本信息",link:"https://github.com/injahow/user.js"},{text:"脚本作者",link:"https://injahow.com"}]}),"dash"===e.config.format&&n&&"#"!==n){$("body").append('<div id="bp_dplayer_2" style="display:none;"></div>'),window.bp_dplayer_2=new DPlayer({container:$("#bp_dplayer_2")[0],mutex:!1,volume:1,autoplay:!0,video:{url:n,type:"auto"}});var i=[window.bp_dplayer,window.bp_dplayer_2],r=i[0],a=i[1];r.on("play",(function(){!r.paused&&a.play()})),r.on("playing",(function(){!r.paused&&a.play()})),r.on("timeupdate",(function(){Math.abs(r.video.currentTime-a.video.currentTime)>1&&(a.pause(),a.seek(r.video.currentTime)),!r.paused&&a.play()})),r.on("seeking",(function(){a.pause(),a.seek(r.video.currentTime)})),r.on("waiting",(function(){a.pause(),a.seek(r.video.currentTime)})),r.on("pause",(function(){a.pause(),a.seek(r.video.currentTime)})),r.on("suspend",(function(){a.speed(r.video.playbackRate)})),r.on("volumechange",(function(){a.volume(r.video.volume),a.video.muted=r.video.muted}))}}))},danmaku:{config:T}};function P(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw r}}}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function I(){return e.config.rpc_domain.match("https://")||e.config.rpc_domain.match(/localhost|127\.0\.0\.1/)?"post":"ariang"}var A=!1;function j(t){var n=t?"#!/settings/rpc/set/".concat(t.domain.replace("://","/"),"/").concat(t.port,"/jsonrpc/").concat(window.btoa(t.token)):"",o=e.config.ariang_host+n,i=document.createElement("a");i.setAttribute("target","_blank"),i.setAttribute("onclick","window.bp_aria2_window=window.open('".concat(o,"');")),document.body.appendChild(i),i.click(),i.remove()}var L=!1,R=!0;function M(e,t){if(L)return p(),void(R=!0);var n=new XMLHttpRequest;n.open("get",e),n.responseType="blob",n.onload=function(){if(200===this.status||304===this.status){if("msSaveOrOpenBlob"in navigator)return void navigator.msSaveOrOpenBlob(this.response,t);var e=URL.createObjectURL(this.response),n=document.createElement("a");n.style.display="none",n.href=e,n.download=t,document.body.appendChild(n),n.click(),n.remove(),URL.revokeObjectURL(e)}},R=!0,n.onprogress=function(e){if(4!=this.state){var t=e.loaded,n=e.total;!function(e){var t=e.total,n=e.loaded,o=e.percent;R&&f("文件大小：".concat(Math.floor(t/1048576),"MB(").concat(t,"Byte)<br/>")+"已经下载：".concat(Math.floor(n/1048576),"MB(").concat(n,"Byte)<br/>")+"当前进度：".concat(o,"%<br/>下载中请勿操作浏览器！"),(function(){R=!1,f("注意：刷新或离开页面会导致下载取消！<br/>再次点击下载按钮可查看下载进度。")})),t===n&&(f("下载完成，请等待浏览器保存！"),L=!1)}({total:n,loaded:t,percent:Math.floor(100*t/n)})}},n.send(),L=!0,d("准备开始下载")}function U(e){return e.match(".flv")?".flv":e.match(".m4s")?"_video.mp4":(e.match(".mp4"),".mp4")}var V={url_format:U,download:function(t,n,o){var i=n.replace(/[\/\\:*?"<>|]+/g,"")+U(t);"blob"===o?M(t,i):"rpc"===o&&function(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"post";if(A)p();else{A=!0;var i={domain:e.config.rpc_domain,port:e.config.rpc_port,token:e.config.rpc_token,dir:e.config.rpc_dir},r={id:window.btoa("BParse_".concat(Date.now(),"_").concat(Math.random())),jsonrpc:"2.0",method:"aria2.addUri",params:["token:".concat(i.token),[t],{dir:i.dir,out:n,header:["User-Agent: ".concat(window.navigator.userAgent),"Referer: ".concat(window.location.href)]}]};if(d("发送RPC下载请求"),"post"===o)v({url:"".concat(i.domain,":").concat(i.port,"/jsonrpc"),type:"POST",dataType:"json",data:JSON.stringify(r)}).then((function(e){e.result?c("RPC请求成功"):s("请检查RPC参数")})).catch((function(e){u("请检查RPC服务配置")})).finally((function(e){return A=!1}));else if("ariang"===o){var a=window.bp_aria2_window,l=100;a&&!a.closed||(j(),l=3e3),setTimeout((function(){var o=window.bp_aria2_window,i="header=User-Agent:".concat(window.navigator.userAgent,"&header=Referer:").concat(window.location.href),r="#!/new/task?url=".concat(window.btoa(t),"&out=").concat(encodeURIComponent(n),"&").concat(i);o&&!o.closed?(o.location.href=e.config.ariang_host+r,c("RPC请求发送成功")):s("AriaNG页面未打开"),A=!1}),l)}}}(t,i,I())},download_all:function(){var t=g.base(),n=[g.get_quality().q,t.total()],o=n[0],i=n[1];$("body").on("click",'input[name="dl_video"]',(function(){$(this).is(":checked")?$(this).parent().css("color","rgba(0,0,0,1)"):$(this).parent().css("color","rgba(0,0,0,0.5)")}));for(var r="",a=0;a<i;a++)r+=""+'<label for="option_'.concat(a,'"><div style="color:rgba(0,0,0,0.5);">\n                <input type="checkbox" id="option_').concat(a,'" name="dl_video" value="').concat(a,'">\n                P').concat(a+1," ").concat(t.title(a+1),"\n            </div></label>");var l=!1;$("body").on("click","button#checkbox_btn",(function(){l?(l=!1,$('input[name="dl_video"]').prop("checked",l),$('input[name="dl_video"]').parent().css("color","rgba(0,0,0,0.5)")):(l=!0,$('input[name="dl_video"]').prop("checked",l),$('input[name="dl_video"]').parent().css("color","rgb(0,0,0)"))}));var p,_={120:"4K 超清",116:"1080P 60帧",112:"1080P 高码率",80:"1080P 高清",74:"720P 60帧",64:"720P 高清",48:"720P 高清(MP4)",32:"480P 清晰",16:"360P 流畅"},m="",b=P(g.get_quality_support());try{for(b.s();!(p=b.n()).done;){var y=p.value;m+='<option value="'.concat(y,'">').concat(_[y],"</option>")}}catch(e){b.e(e)}finally{b.f()}var w=""+'<div style="margin:2% 0;">\n            <label>视频格式：</label>\n            <select id="dl_format">\n                <option value="flv" selected>FLV</option>\n                <option value="mp4">MP4</option>\n            </select>\n            &nbsp;&nbsp;仅video类型支持mp4\n        </div>\n        <div style="margin:2% 0;">\n            <label>视频质量：</label>\n            <select id="dl_quality">\n                '.concat(m,'\n            </select>\n        </div>\n        <div style="margin:2% 0;">\n            <label>下载字幕：</label>\n            <select id="dl_subtitle">\n                <option value="0" selected>关闭</option>\n                <option value="1">VTT</option>\n            </select>\n            &nbsp;&nbsp\n            <label>下载弹幕：</label>\n            <select id="dl_danmaku">\n                <option value="0" selected>关闭</option>\n                <option value="1">ASS</option>\n            </select>\n        </div>\n        <b>\n            <span style="color:red;">为避免请求被拦截，设置了延时且不支持下载无法播放的视频；请勿频繁下载过多视频，可能触发风控导致不可再下载！</span>\n        </b><br />\n        <div style="height:220px;width:100%;overflow:auto;background:rgba(0,0,0,0.1);">\n            ').concat(r,"\n        </div>\n        <div>").concat("medialist"===g.type()?"不支持多页视频，若需要请到视频原播放页面下载":"",'</div>\n        <div style="margin:2% 0;">\n            <button id="checkbox_btn">全选</button>\n        </div>');function k(t,n,o){if(t.length)if(n<t.length){var i=t[n];"1"===i.dl_subtitle&&V.download_subtitle_vtt(i.p,i.filename),"1"===i.dl_danmaku&&V.download_danmaku_ass(i.cid,i.filename);var r="第".concat(n+1,"（").concat(n+1,"/").concat(t.length,"）个视频");f("".concat(r,"：获取中...")),setTimeout((function(){x.get_urls(i.p,i.q,i.format,(function(a){if(!a.code){c("请求成功"+(a.times?"<br/>今日剩余请求次数".concat(a.times):"")),f("".concat(r,"：获取成功！"));var l=[a.url,U(a.url),I()],u=l[0],d=l[1],p=l[2];"post"===p?(o.push({url:u,filename:i.filename+d}),o.length>3&&(S(o),o.length=0)):"ariang"===p&&function(t){var n=window.bp_aria2_window,o=100;n&&!n.closed||(j(),o=3e3);setTimeout((function(){var n=window.bp_aria2_window,o="header=User-Agent:".concat(window.navigator.userAgent,"&header=Referer:").concat(window.location.href);if(n&&!n.closed){var i="#!/new/task?url=".concat(window.btoa(t.url),"&out=").concat(encodeURIComponent(t.filename),"&").concat(o);n.location.href=e.config.ariang_host+i,c("RPC请求成功")}else s("请检查RPC参数")}),o)}({url:u,filename:i.filename+d})}setTimeout((function(){k(t,++n,o)}),3e3)}),(function(){k(t,++n,o)}))}),3e3)}else f("视频地址请求完成！"),"post"===I()&&o.length>0&&(S(o),o.length=0)}function S(t){var n,o={domain:e.config.rpc_domain,port:e.config.rpc_port,token:e.config.rpc_token,dir:e.config.rpc_dir},i=[],r=P(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;i.push({id:window.btoa("BParse_".concat(Date.now(),"_").concat(Math.random())),jsonrpc:"2.0",method:"aria2.addUri",params:["token:".concat(o.token),[a.url],{dir:o.dir,out:a.filename,header:["User-Agent: ".concat(window.navigator.userAgent),"Referer: ".concat(window.location.href)]}]})}}catch(e){r.e(e)}finally{r.f()}d("发送RPC下载请求"),v({url:"".concat(o.domain,":").concat(o.port,"/jsonrpc"),type:"POST",dataType:"json",data:JSON.stringify(i)}).then((function(e){e.length===i.length?c("RPC请求成功"):s("请检查RPC参数")})).catch((function(e){u("请检查RPC服务配置")}))}h(w,(function(){for(var e=$("#dl_quality").val()||o,n=$("#dl_subtitle").val(),r=$("#dl_danmaku").val(),a=[],l=0;l<i;l++)if($("input#option_".concat(l)).is(":checked")){var c=l+1,s=[t.cid(c),t.filename(c)],u=s[0],d=s[1],p=$("#dl_format").val();a.push({dl_subtitle:n,dl_danmaku:r,cid:u,p:c,q:e,format:p,filename:d})}k(a,0,[])})),$("#dl_quality").val(o>120?80:o)},download_danmaku_ass:function(e,t){v({url:"https://api.bilibili.com/x/v1/dm/list.so?oid=".concat(e),dataType:"text"}).then((function(e){var n=$(e.replace(/[\x00-\x08\x0b-\x0c\x0e-\x1f\x7f]/g,""));if(n&&n.find("d")[0]){var o=n.find("d").map((function(e,t){var n=$(t),o=n.attr("p").split(","),i=0;return"4"===o[1]?i=2:"5"===o[1]&&(i=1),[{time:parseFloat(o[0]),type:i,color:parseInt(o[3]),text:n.text()}]})).get();o.sort((function(e,t){return e.time-t.time}));var i,r=function(e,t,n){var o,i,r,a,l=e.text,c=e.time,s=[0===e.type?(i=50*(1+Math.floor(15*Math.random())),r=1920+50*e.text.length/2,a=0-50*e.text.length/2,"\\move(".concat(r,",").concat(i,",").concat(a,",").concat(i,")")):function(e,t){return"\\pos(".concat(t,",").concat(e,")")}(50*(1+n%15),960),(o=e.color,16777215===o?"":function(e){return"\\c&H".concat(((255&e)<<16|(e>>8&255)<<8|e>>16&255).toString(16),"&")}(e.color))],u=function(e){var t=function(e,t){return Math.floor(e/t)},n=function(e){return e<10?"0"+e:""+e},o=Math.floor(e),i=t(o,3600),r=t(o,60)%60,a=o%60,l=Math.floor(100*(e-o));return"".concat(i,":").concat(n(r),":").concat(n(a),".").concat(l)},d=[0,u(c),u(c+(0===e.type?8:4)),"Medium","","0","0","0","","{"+s.join("")+"}"+function(e){return e.replace(/\{/g,"｛").replace(/\}/g,"｝").replace(/\r|\n/g,"")}(l)];return"Dialogue: "+d.join(",")},a=["[Script Info]","; Script generated by bilibili-parse","; https://github.com/injahow/bilibili-parse","Title: ".concat(t),"ScriptType: v4.00+","PlayResX: ".concat(1920),"PlayResY: ".concat(1080),"Timer: 10.0000","WrapStyle: 2","ScaledBorderAndShadow: no","","[V4+ Styles]","Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding","Style: Small,微软雅黑,36,&H66FFFFFF,&H66FFFFFF,&H66000000,&H66000000,0,0,0,0,100,100,0,0,1,1.2,0,5,0,0,0,0","Style: Medium,微软雅黑,52,&H66FFFFFF,&H66FFFFFF,&H66000000,&H66000000,0,0,0,0,100,100,0,0,1,1.2,0,5,0,0,0,0","Style: Large,微软雅黑,64,&H66FFFFFF,&H66FFFFFF,&H66000000,&H66000000,0,0,0,0,100,100,0,0,1,1.2,0,5,0,0,0,0","Style: Larger,微软雅黑,72,&H66FFFFFF,&H66FFFFFF,&H66000000,&H66000000,0,0,0,0,100,100,0,0,1,1.2,0,5,0,0,0,0","Style: ExtraLarge,微软雅黑,90,&H66FFFFFF,&H66FFFFFF,&H66000000,&H66000000,0,0,0,0,100,100,0,0,1,1.2,0,5,0,0,0,0","","[Events]","Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text"],l=0,c=P(o);try{for(c.s();!(i=c.n()).done;){var u=i.value;0===u.type?0:l++,a.push(r(u,0,l))}}catch(e){c.e(e)}finally{c.f()}var d=URL.createObjectURL(new Blob([a.join("\n")],{type:"text/ass"})),p=document.createElement("a");p.style.display="none",p.href=d,p.download=t+".ass",document.body.appendChild(p),p.click(),p.remove(),URL.revokeObjectURL(d)}else s("未发现弹幕")})).catch((function(e){s("未发现字幕")}))},download_subtitle_vtt:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e){var n=document.createElement("a");n.setAttribute("target","_blank"),n.setAttribute("href",e),n.setAttribute("download",t+".vtt"),document.body.appendChild(n),n.click(),n.remove(),URL.revokeObjectURL(e)}else s("未发现字幕")};x.get_subtitle_url(e,n)},open_ariang:j};function D(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var N=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.is_login=!1,this.vip_status=0,this.mid="",this.uname="",this.has_init=!1,this.lazyInit()}var t,n,o;return t=e,(n=[{key:"needReplace",value:function(){return!this.is_login||!this.vip_status&&g.base().need_vip()}},{key:"lazyInit",value:function(e){this.has_init||(window.__BILI_USER_INFO__?(this.is_login=window.__BILI_USER_INFO__.isLogin,this.vip_status=window.__BILI_USER_INFO__.vipStatus,this.mid=window.__BILI_USER_INFO__.mid||"",this.uname=window.__BILI_USER_INFO__.uname||""):window.__BiliUser__&&(this.is_login=window.__BiliUser__.isLogin,window.__BiliUser__.cache?(this.vip_status=window.__BiliUser__.cache.data.vipStatus,this.mid=window.__BiliUser__.cache.data.mid||"",this.uname=window.__BiliUser__.cache.data.uname||""):(this.vip_status=0,this.mid="",this.uname="")),this.has_init=e)}}])&&D(t.prototype,n),o&&D(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}());function q(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var B=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.auth_clicked=!1}var n,i,r;return n=t,i=[{key:"reLogin",value:function(){o.set("auth_id",""),o.set("auth_sec",""),o.set("access_key",""),o.set("auth_time","0"),this.login()}},{key:"checkLoginStatus",value:function(){var t=this,n=[o.get("auth_id"),o.get("auth_sec"),o.get("access_key"),o.get("auth_time")||"0"],i=n[0],r=n[1],a=n[2],l=n[3];a&&(N.is_login&&(e.config.base_api!==o.get("pre_base_api")||Date.now()-parseInt(l)>864e5)&&v({url:"https://api.bilibili.com/x/space/myinfo?access_key=".concat(a),type:"GET",dataType:"json"}).then((function(n){if(!n.code)return o.set("auth_time",Date.now()),v({url:"".concat(e.config.base_api,"/auth/v2/?act=check&auth_id=").concat(i,"&auth_sec=").concat(r,"&access_key=").concat(a),type:"GET",dataType:"json"});f("授权已过期，准备重新授权",t.reLogin)})).then((function(e){e.code&&f("授权检查失败，准备重新授权",t.reLogin)})),o.set("pre_base_api",e.config.base_api))}},{key:"_login",value:function(e){var t=this;this.auth_clicked?p():(this.auth_clicked=!0,v({url:"https://passport.bilibili.com/login/app/third?appkey=27eb53fc9058f8c3&api=https%3A%2F%2Fwww.mcbbs.net%2Ftemplate%2Fmcbbs%2Fimage%2Fspecial_photo_bg.png&sign=04224646d1fea004e79606d3b038c84a",xhrFields:{withCredentials:!0},type:"GET",dataType:"json"}).then(e).finally((function(e){return t.auth_clicked=!1})))}},{key:"login",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1",t="1"===e?this.loginAuto.bind(this):this.loginManual.bind(this);o.get("auth_id")?h("发现授权记录，是否重新授权？",t):t()}},{key:"loginAuto",value:function(){this._login((function(e){e.data.has_login?$("body").append("<iframe id='auth_iframe' src='".concat(e.data.confirm_uri,"' style='display:none;'></iframe>")):h("必须登录B站才能正常授权，是否登陆？",(function(){location.href="https://passport.bilibili.com/login"}))}))}},{key:"loginManual",value:function(){this._login((function(t){if(t.data.has_login){var n=""+"请点击<b><a href='".concat(t.data.confirm_uri,"' target='_blank'>授权地址</a></b>\n                    打开一个新窗口，正常情况新窗口应该显示一个图片，请将该窗口地址栏的URL链接复制到当前文本框中<br/>\n                    <input id='auth_url' style='width:100%;' type='text' autocomplete='off'><br>然后点击确定即可");f(n,(function(){var t=$("#auth_url").val(),n=o.get("auth_id")||"",i=o.get("auth_sec")||"";v({url:t.replace("https://www.mcbbs.net/template/mcbbs/image/special_photo_bg.png?","".concat(e.config.base_api,"/auth/v2/?act=login&auth_id=").concat(n,"&auth_sec=").concat(i,"&")),type:"GET",dataType:"json"}).then((function(n){n.code?s("授权失败"):(c("授权成功"),n.auth_id&&n.auth_sec&&(o.set("auth_id",n.auth_id),o.set("auth_sec",n.auth_sec)),o.set("access_key",new URL(t).searchParams.get("access_key")),o.set("auth_time",Date.now()),$("#auth").val("1"),e.config.auth="1")}))}))}else h("必须登录B站才能正常授权，是否登陆？",(function(){location.href="https://passport.bilibili.com/login"}))}))}},{key:"logout",value:function(){var t=this;if(o.get("auth_id"))if(this.auth_clicked)p();else{var n=[o.get("auth_id"),o.get("auth_sec")],i=n[0],r=n[1];v({url:"".concat(e.config.base_api,"/auth/v2/?act=logout&auth_id=").concat(i,"&auth_sec=").concat(r),type:"GET",dataType:"json"}).then((function(t){t.code?s("取消失败"):(c("取消成功"),o.set("auth_id",""),o.set("auth_sec",""),o.set("auth_time","0"),o.set("access_key",""),$("#auth").val("0"),e.config.auth="0")})).finally((function(e){return t.auth_clicked=!1}))}else f("没有发现授权记录")}},{key:"initAuth",value:function(){var t=this;window.addEventListener("message",(function(n){if("string"==typeof n.data&&"bilibili-parse-login-credentials"===n.data.split(":")[0]){$("iframe#auth_iframe").remove();var i=n.data.split(": ")[1],r=[o.get("auth_id"),o.get("auth_sec")],a=r[0],l=r[1];v({url:i.replace("https://www.mcbbs.net/template/mcbbs/image/special_photo_bg.png?","".concat(e.config.base_api,"/auth/v2/?act=login&auth_id=").concat(a,"&auth_sec=").concat(l,"&")),type:"GET",dataType:"json"}).then((function(t){t.code?s("授权失败"):(c("授权成功"),t.auth_id&&t.auth_sec&&(o.set("auth_id",t.auth_id),o.set("auth_sec",t.auth_sec)),o.set("access_key",new URL(i).searchParams.get("access_key")),o.set("auth_time",Date.now()),$("#auth").val("1"),e.config.auth="1")})).finally((function(e){return t.auth_clicked=!1}))}}))}}],i&&q(n.prototype,i),r&&q(n,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(),z=new B;function H(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var W=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.aid="",this.cid="",this.q="",this.epid=""}var t,n,o;return t=e,(n=[{key:"refresh",value:function(){console.log("refresh..."),$("#video_download").hide(),$("#video_download_2").hide(),E.recover_player();var e=g.base();this.aid=e.aid(),this.cid=e.cid(),this.epid=e.epid(),this.q=g.get_quality().q,window.bp_episodes=null}}])&&H(t.prototype,n),o&&H(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}());function G(e,t){const n=Object.create(null),o=e.split(",");for(let e=0;e<o.length;e++)n[o[e]]=!0;return t?e=>!!n[e.toLowerCase()]:e=>!!n[e]}const K="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",J=G(K);function Z(e){return!!e||""===e}function Y(e){if(he(e)){const t={};for(let n=0;n<e.length;n++){const o=e[n],i=ge(o)?ee(o):Y(o);if(i)for(const e in i)t[e]=i[e]}return t}return ge(e)||ye(e)?e:void 0}const X=/;(?![^(]*\))/g,Q=/:(.+)/;function ee(e){const t={};return e.split(X).forEach((e=>{if(e){const n=e.split(Q);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}function te(e){let t="";if(ge(e))t=e;else if(he(e))for(let n=0;n<e.length;n++){const o=te(e[n]);o&&(t+=o+" ")}else if(ye(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const ne=(e,t)=>t&&t.__v_isRef?ne(e,t.value):ve(t)?{[`Map(${t.size})`]:[...t.entries()].reduce(((e,[t,n])=>(e[`${t} =>`]=n,e)),{})}:_e(t)?{[`Set(${t.size})`]:[...t.values()]}:!ye(t)||he(t)||Se(t)?t:String(t),oe={},ie=[],re=()=>{},ae=()=>!1,le=/^on[^a-z]/,ce=e=>le.test(e),se=e=>e.startsWith("onUpdate:"),ue=Object.assign,de=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},pe=Object.prototype.hasOwnProperty,fe=(e,t)=>pe.call(e,t),he=Array.isArray,ve=e=>"[object Map]"===ke(e),_e=e=>"[object Set]"===ke(e),me=e=>"function"==typeof e,ge=e=>"string"==typeof e,be=e=>"symbol"==typeof e,ye=e=>null!==e&&"object"==typeof e,we=e=>ye(e)&&me(e.then)&&me(e.catch),xe=Object.prototype.toString,ke=e=>xe.call(e),Se=e=>"[object Object]"===ke(e),$e=e=>ge(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,Ce=G(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Oe=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Te=/-(\w)/g,Ee=Oe((e=>e.replace(Te,((e,t)=>t?t.toUpperCase():"")))),Pe=/\B([A-Z])/g,Fe=Oe((e=>e.replace(Pe,"-$1").toLowerCase())),Ie=Oe((e=>e.charAt(0).toUpperCase()+e.slice(1))),Ae=Oe((e=>e?`on${Ie(e)}`:"")),je=(e,t)=>!Object.is(e,t),Le=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Re=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Me=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Ue;const Ve=()=>Ue||(Ue="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:{});let De;class Ne{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&De&&(this.parent=De,this.index=(De.scopes||(De.scopes=[])).push(this)-1)}run(e){if(this.active){const t=De;try{return De=this,e()}finally{De=t}}else 0}on(){De=this}off(){De=this.parent}stop(e){if(this.active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.active=!1}}}function qe(e,t=De){t&&t.active&&t.effects.push(e)}const Be=e=>{const t=new Set(e);return t.w=0,t.n=0,t},ze=e=>(e.w&Ke)>0,He=e=>(e.n&Ke)>0,We=new WeakMap;let Ge=0,Ke=1;let Je;const Ze=Symbol(""),Ye=Symbol("");class Xe{constructor(e,t=null,n){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,qe(this,n)}run(){if(!this.active)return this.fn();let e=Je,t=et;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Je,Je=this,et=!0,Ke=1<<++Ge,Ge<=30?(({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Ke})(this):Qe(this),this.fn()}finally{Ge<=30&&(e=>{const{deps:t}=e;if(t.length){let n=0;for(let o=0;o<t.length;o++){const i=t[o];ze(i)&&!He(i)?i.delete(e):t[n++]=i,i.w&=~Ke,i.n&=~Ke}t.length=n}})(this),Ke=1<<--Ge,Je=this.parent,et=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Je===this?this.deferStop=!0:this.active&&(Qe(this),this.onStop&&this.onStop(),this.active=!1)}}function Qe(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let et=!0;const tt=[];function nt(){tt.push(et),et=!1}function ot(){const e=tt.pop();et=void 0===e||e}function it(e,t,n){if(et&&Je){let t=We.get(e);t||We.set(e,t=new Map);let o=t.get(n);o||t.set(n,o=Be());rt(o,void 0)}}function rt(e,t){let n=!1;Ge<=30?He(e)||(e.n|=Ke,n=!ze(e)):n=!e.has(Je),n&&(e.add(Je),Je.deps.push(e))}function at(e,t,n,o,i,r){const a=We.get(e);if(!a)return;let l=[];if("clear"===t)l=[...a.values()];else if("length"===n&&he(e))a.forEach(((e,t)=>{("length"===t||t>=o)&&l.push(e)}));else switch(void 0!==n&&l.push(a.get(n)),t){case"add":he(e)?$e(n)&&l.push(a.get("length")):(l.push(a.get(Ze)),ve(e)&&l.push(a.get(Ye)));break;case"delete":he(e)||(l.push(a.get(Ze)),ve(e)&&l.push(a.get(Ye)));break;case"set":ve(e)&&l.push(a.get(Ze))}if(1===l.length)l[0]&&lt(l[0]);else{const e=[];for(const t of l)t&&e.push(...t);lt(Be(e))}}function lt(e,t){for(const t of he(e)?e:[...e])(t!==Je||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const ct=G("__proto__,__v_isRef,__isVue"),st=new Set(Object.getOwnPropertyNames(Symbol).map((e=>Symbol[e])).filter(be)),ut=vt(),dt=vt(!1,!0),pt=vt(!0),ft=ht();function ht(){const e={};return["includes","indexOf","lastIndexOf"].forEach((t=>{e[t]=function(...e){const n=Qt(this);for(let e=0,t=this.length;e<t;e++)it(n,0,e+"");const o=n[t](...e);return-1===o||!1===o?n[t](...e.map(Qt)):o}})),["push","pop","shift","unshift","splice"].forEach((t=>{e[t]=function(...e){nt();const n=Qt(this)[t].apply(this,e);return ot(),n}})),e}function vt(e=!1,t=!1){return function(n,o,i){if("__v_isReactive"===o)return!e;if("__v_isReadonly"===o)return e;if("__v_isShallow"===o)return t;if("__v_raw"===o&&i===(e?t?zt:Bt:t?qt:Nt).get(n))return n;const r=he(n);if(!e&&r&&fe(ft,o))return Reflect.get(ft,o,i);const a=Reflect.get(n,o,i);if(be(o)?st.has(o):ct(o))return a;if(e||it(n,0,o),t)return a;if(an(a)){return!r||!$e(o)?a.value:a}return ye(a)?e?Gt(a):Wt(a):a}}function _t(e=!1){return function(t,n,o,i){let r=t[n];if(Zt(r)&&an(r)&&!an(o))return!1;if(!e&&!Zt(o)&&(Yt(o)||(o=Qt(o),r=Qt(r)),!he(t)&&an(r)&&!an(o)))return r.value=o,!0;const a=he(t)&&$e(n)?Number(n)<t.length:fe(t,n),l=Reflect.set(t,n,o,i);return t===Qt(i)&&(a?je(o,r)&&at(t,"set",n,o):at(t,"add",n,o)),l}}const mt={get:ut,set:_t(),deleteProperty:function(e,t){const n=fe(e,t),o=(e[t],Reflect.deleteProperty(e,t));return o&&n&&at(e,"delete",t,void 0),o},has:function(e,t){const n=Reflect.has(e,t);return be(t)&&st.has(t)||it(e,0,t),n},ownKeys:function(e){return it(e,0,he(e)?"length":Ze),Reflect.ownKeys(e)}},gt={get:pt,set:(e,t)=>!0,deleteProperty:(e,t)=>!0},bt=ue({},mt,{get:dt,set:_t(!0)}),yt=e=>e,wt=e=>Reflect.getPrototypeOf(e);function xt(e,t,n=!1,o=!1){const i=Qt(e=e.__v_raw),r=Qt(t);t!==r&&!n&&it(i,0,t),!n&&it(i,0,r);const{has:a}=wt(i),l=o?yt:n?nn:tn;return a.call(i,t)?l(e.get(t)):a.call(i,r)?l(e.get(r)):void(e!==i&&e.get(t))}function kt(e,t=!1){const n=this.__v_raw,o=Qt(n),i=Qt(e);return e!==i&&!t&&it(o,0,e),!t&&it(o,0,i),e===i?n.has(e):n.has(e)||n.has(i)}function St(e,t=!1){return e=e.__v_raw,!t&&it(Qt(e),0,Ze),Reflect.get(e,"size",e)}function $t(e){e=Qt(e);const t=Qt(this);return wt(t).has.call(t,e)||(t.add(e),at(t,"add",e,e)),this}function Ct(e,t){t=Qt(t);const n=Qt(this),{has:o,get:i}=wt(n);let r=o.call(n,e);r||(e=Qt(e),r=o.call(n,e));const a=i.call(n,e);return n.set(e,t),r?je(t,a)&&at(n,"set",e,t):at(n,"add",e,t),this}function Ot(e){const t=Qt(this),{has:n,get:o}=wt(t);let i=n.call(t,e);i||(e=Qt(e),i=n.call(t,e));o&&o.call(t,e);const r=t.delete(e);return i&&at(t,"delete",e,void 0),r}function Tt(){const e=Qt(this),t=0!==e.size,n=e.clear();return t&&at(e,"clear",void 0,void 0),n}function Et(e,t){return function(n,o){const i=this,r=i.__v_raw,a=Qt(r),l=t?yt:e?nn:tn;return!e&&it(a,0,Ze),r.forEach(((e,t)=>n.call(o,l(e),l(t),i)))}}function Pt(e,t,n){return function(...o){const i=this.__v_raw,r=Qt(i),a=ve(r),l="entries"===e||e===Symbol.iterator&&a,c="keys"===e&&a,s=i[e](...o),u=n?yt:t?nn:tn;return!t&&it(r,0,c?Ye:Ze),{next(){const{value:e,done:t}=s.next();return t?{value:e,done:t}:{value:l?[u(e[0]),u(e[1])]:u(e),done:t}},[Symbol.iterator](){return this}}}}function Ft(e){return function(...t){return"delete"!==e&&this}}function It(){const e={get(e){return xt(this,e)},get size(){return St(this)},has:kt,add:$t,set:Ct,delete:Ot,clear:Tt,forEach:Et(!1,!1)},t={get(e){return xt(this,e,!1,!0)},get size(){return St(this)},has:kt,add:$t,set:Ct,delete:Ot,clear:Tt,forEach:Et(!1,!0)},n={get(e){return xt(this,e,!0)},get size(){return St(this,!0)},has(e){return kt.call(this,e,!0)},add:Ft("add"),set:Ft("set"),delete:Ft("delete"),clear:Ft("clear"),forEach:Et(!0,!1)},o={get(e){return xt(this,e,!0,!0)},get size(){return St(this,!0)},has(e){return kt.call(this,e,!0)},add:Ft("add"),set:Ft("set"),delete:Ft("delete"),clear:Ft("clear"),forEach:Et(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((i=>{e[i]=Pt(i,!1,!1),n[i]=Pt(i,!0,!1),t[i]=Pt(i,!1,!0),o[i]=Pt(i,!0,!0)})),[e,n,t,o]}const[At,jt,Lt,Rt]=It();function Mt(e,t){const n=t?e?Rt:Lt:e?jt:At;return(t,o,i)=>"__v_isReactive"===o?!e:"__v_isReadonly"===o?e:"__v_raw"===o?t:Reflect.get(fe(n,o)&&o in t?n:t,o,i)}const Ut={get:Mt(!1,!1)},Vt={get:Mt(!1,!0)},Dt={get:Mt(!0,!1)};const Nt=new WeakMap,qt=new WeakMap,Bt=new WeakMap,zt=new WeakMap;function Ht(e){return e.__v_skip||!Object.isExtensible(e)?0:function(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((e=>ke(e).slice(8,-1))(e))}function Wt(e){return Zt(e)?e:Kt(e,!1,mt,Ut,Nt)}function Gt(e){return Kt(e,!0,gt,Dt,Bt)}function Kt(e,t,n,o,i){if(!ye(e))return e;if(e.__v_raw&&(!t||!e.__v_isReactive))return e;const r=i.get(e);if(r)return r;const a=Ht(e);if(0===a)return e;const l=new Proxy(e,2===a?o:n);return i.set(e,l),l}function Jt(e){return Zt(e)?Jt(e.__v_raw):!(!e||!e.__v_isReactive)}function Zt(e){return!(!e||!e.__v_isReadonly)}function Yt(e){return!(!e||!e.__v_isShallow)}function Xt(e){return Jt(e)||Zt(e)}function Qt(e){const t=e&&e.__v_raw;return t?Qt(t):e}function en(e){return Re(e,"__v_skip",!0),e}const tn=e=>ye(e)?Wt(e):e,nn=e=>ye(e)?Gt(e):e;function on(e){et&&Je&&rt((e=Qt(e)).dep||(e.dep=Be()))}function rn(e,t){(e=Qt(e)).dep&&lt(e.dep)}function an(e){return!(!e||!0!==e.__v_isRef)}const ln={get:(e,t,n)=>function(e){return an(e)?e.value:e}(Reflect.get(e,t,n)),set:(e,t,n,o)=>{const i=e[t];return an(i)&&!an(n)?(i.value=n,!0):Reflect.set(e,t,n,o)}};function cn(e){return Jt(e)?e:new Proxy(e,ln)}class sn{constructor(e,t,n,o){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new Xe(e,(()=>{this._dirty||(this._dirty=!0,rn(this))})),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=n}get value(){const e=Qt(this);return on(e),!e._dirty&&e._cacheable||(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function un(e,t,n,o){let i;try{i=o?e(...o):e()}catch(e){pn(e,t,n)}return i}function dn(e,t,n,o){if(me(e)){const i=un(e,t,n,o);return i&&we(i)&&i.catch((e=>{pn(e,t,n)})),i}const i=[];for(let r=0;r<e.length;r++)i.push(dn(e[r],t,n,o));return i}function pn(e,t,n,o=!0){t&&t.vnode;if(t){let o=t.parent;const i=t.proxy,r=n;for(;o;){const t=o.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,i,r))return;o=o.parent}const a=t.appContext.config.errorHandler;if(a)return void un(a,null,10,[e,i,r])}!function(e,t,n,o=!0){console.error(e)}(e,0,0,o)}let fn=!1,hn=!1;const vn=[];let _n=0;const mn=[];let gn=null,bn=0;const yn=[];let wn=null,xn=0;const kn=Promise.resolve();let Sn=null,$n=null;function Cn(e){const t=Sn||kn;return e?t.then(this?e.bind(this):e):t}function On(e){vn.length&&vn.includes(e,fn&&e.allowRecurse?_n+1:_n)||e===$n||(null==e.id?vn.push(e):vn.splice(function(e){let t=_n+1,n=vn.length;for(;t<n;){const o=t+n>>>1;An(vn[o])<e?t=o+1:n=o}return t}(e.id),0,e),Tn())}function Tn(){fn||hn||(hn=!0,Sn=kn.then(jn))}function En(e,t,n,o){he(e)?n.push(...e):t&&t.includes(e,e.allowRecurse?o+1:o)||n.push(e),Tn()}function Pn(e){En(e,wn,yn,xn)}function Fn(e,t=null){if(mn.length){for($n=t,gn=[...new Set(mn)],mn.length=0,bn=0;bn<gn.length;bn++)gn[bn]();gn=null,bn=0,$n=null,Fn(e,t)}}function In(e){if(yn.length){const e=[...new Set(yn)];if(yn.length=0,wn)return void wn.push(...e);for(wn=e,wn.sort(((e,t)=>An(e)-An(t))),xn=0;xn<wn.length;xn++)wn[xn]();wn=null,xn=0}}const An=e=>null==e.id?1/0:e.id;function jn(e){hn=!1,fn=!0,Fn(e),vn.sort(((e,t)=>An(e)-An(t)));try{for(_n=0;_n<vn.length;_n++){const e=vn[_n];e&&!1!==e.active&&un(e,null,14)}}finally{_n=0,vn.length=0,In(),fn=!1,Sn=null,(vn.length||mn.length||yn.length)&&jn(e)}}new Set;new Map;let Ln,Rn=[],Mn=!1;function Un(e,...t){Ln?Ln.emit(e,...t):Mn||Rn.push({event:e,args:t})}function Vn(e,t){var n,o;if(Ln=e,Ln)Ln.enabled=!0,Rn.forEach((({event:e,args:t})=>Ln.emit(e,...t))),Rn=[];else if(
// eslint-disable-next-line no-restricted-globals
"undefined"!=typeof window&&window.HTMLElement&&!(null===(o=null===(n=window.navigator)||void 0===n?void 0:n.userAgent)||void 0===o?void 0:o.includes("jsdom"))){(t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push((e=>{Vn(e,t)})),setTimeout((()=>{Ln||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Mn=!0,Rn=[])}),3e3)}else Mn=!0,Rn=[]}const Dn=Bn("component:added"),Nn=Bn("component:updated"),qn=Bn("component:removed");function Bn(e){return t=>{Un(e,t.appContext.app,t.uid,t.parent?t.parent.uid:void 0,t)}}function zn(e,t,...n){if(e.isUnmounted)return;const o=e.vnode.props||oe;let i=n;const r=t.startsWith("update:"),a=r&&t.slice(7);if(a&&a in o){const e=`${"modelValue"===a?"model":a}Modifiers`,{number:t,trim:r}=o[e]||oe;r?i=n.map((e=>e.trim())):t&&(i=n.map(Me))}let l;__VUE_PROD_DEVTOOLS__&&function(e,t,n){Un("component:emit",e.appContext.app,e,t,n)}(e,t,i);let c=o[l=Ae(t)]||o[l=Ae(Ee(t))];!c&&r&&(c=o[l=Ae(Fe(t))]),c&&dn(c,e,6,i);const s=o[l+"Once"];if(s){if(e.emitted){if(e.emitted[l])return}else e.emitted={};e.emitted[l]=!0,dn(s,e,6,i)}}function Hn(e,t,n=!1){const o=t.emitsCache,i=o.get(e);if(void 0!==i)return i;const r=e.emits;let a={},l=!1;if(__VUE_OPTIONS_API__&&!me(e)){const o=e=>{const n=Hn(e,t,!0);n&&(l=!0,ue(a,n))};!n&&t.mixins.length&&t.mixins.forEach(o),e.extends&&o(e.extends),e.mixins&&e.mixins.forEach(o)}return r||l?(he(r)?r.forEach((e=>a[e]=null)):ue(a,r),o.set(e,a),a):(o.set(e,null),null)}function Wn(e,t){return!(!e||!ce(t))&&(t=t.slice(2).replace(/Once$/,""),fe(e,t[0].toLowerCase()+t.slice(1))||fe(e,Fe(t))||fe(e,t))}let Gn=null,Kn=null;function Jn(e){const t=Gn;return Gn=e,Kn=e&&e.type.__scopeId||null,t}function Zn(e,t=Gn,n){if(!t)return e;if(e._n)return e;const o=(...n)=>{o._d&&Pi(-1);const i=Jn(t),r=e(...n);return Jn(i),o._d&&Pi(1),__VUE_PROD_DEVTOOLS__&&Nn(t),r};return o._n=!0,o._c=!0,o._d=!0,o}function Yn(e){const{type:t,vnode:n,proxy:o,withProxy:i,props:r,propsOptions:[a],slots:l,attrs:c,emit:s,render:u,renderCache:d,data:p,setupState:f,ctx:h,inheritAttrs:v}=e;let _,m;const g=Jn(e);try{if(4&n.shapeFlag){const e=i||o;_=Wi(u.call(e,e,d,r,f,p,h)),m=c}else{const e=t;0,_=Wi(e.length>1?e(r,{attrs:c,slots:l,emit:s}):e(r,null)),m=t.props?c:Xn(c)}}catch(t){$i.length=0,pn(t,e,1),_=Di(ki)}let b=_;if(m&&!1!==v){const e=Object.keys(m),{shapeFlag:t}=b;e.length&&7&t&&(a&&e.some(se)&&(m=Qn(m,a)),b=qi(b,m))}return n.dirs&&(b.dirs=b.dirs?b.dirs.concat(n.dirs):n.dirs),n.transition&&(b.transition=n.transition),_=b,Jn(g),_}const Xn=e=>{let t;for(const n in e)("class"===n||"style"===n||ce(n))&&((t||(t={}))[n]=e[n]);return t},Qn=(e,t)=>{const n={};for(const o in e)se(o)&&o.slice(9)in t||(n[o]=e[o]);return n};function eo(e,t,n){const o=Object.keys(t);if(o.length!==Object.keys(e).length)return!0;for(let i=0;i<o.length;i++){const r=o[i];if(t[r]!==e[r]&&!Wn(n,r))return!0}return!1}function to({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}function no(e,t){t&&t.pendingBranch?he(e)?t.effects.push(...e):t.effects.push(e):Pn(e)}function oo(e,t,n=!1){const o=or||Gn;if(o){const i=null==o.parent?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return n&&me(t)?t.call(o.proxy):t}else 0}const io={};function ro(e,t,n){return ao(e,t,n)}function ao(e,t,{immediate:n,deep:o,flush:i,onTrack:r,onTrigger:a}=oe){const l=or;let c,s,u=!1,d=!1;if(an(e)?(c=()=>e.value,u=Yt(e)):Jt(e)?(c=()=>e,o=!0):he(e)?(d=!0,u=e.some(Jt),c=()=>e.map((e=>an(e)?e.value:Jt(e)?so(e):me(e)?un(e,l,2):void 0))):c=me(e)?t?()=>un(e,l,2):()=>{if(!l||!l.isUnmounted)return s&&s(),dn(e,l,3,[p])}:re,t&&o){const e=c;c=()=>so(e())}let p=e=>{s=_.onStop=()=>{un(e,l,4)}};if(ur)return p=re,t?n&&dn(t,l,3,[c(),d?[]:void 0,p]):c(),re;let f=d?[]:io;const h=()=>{if(_.active)if(t){const e=_.run();(o||u||(d?e.some(((e,t)=>je(e,f[t]))):je(e,f)))&&(s&&s(),dn(t,l,3,[e,f===io?void 0:f,p]),f=e)}else _.run()};let v;h.allowRecurse=!!t,v="sync"===i?h:"post"===i?()=>_i(h,l&&l.suspense):()=>{!l||l.isMounted?function(e){En(e,gn,mn,bn)}(h):h()};const _=new Xe(c,v);return t?n?h():f=_.run():"post"===i?_i(_.run.bind(_),l&&l.suspense):_.run(),()=>{_.stop(),l&&l.scope&&de(l.scope.effects,_)}}function lo(e,t,n){const o=this.proxy,i=ge(e)?e.includes(".")?co(o,e):()=>o[e]:e.bind(o,o);let r;me(t)?r=t:(r=t.handler,n=t);const a=or;rr(this);const l=ao(i,r.bind(o),n);return a?rr(a):ar(),l}function co(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}function so(e,t){if(!ye(e)||e.__v_skip)return e;if((t=t||new Set).has(e))return e;if(t.add(e),an(e))so(e.value,t);else if(he(e))for(let n=0;n<e.length;n++)so(e[n],t);else if(_e(e)||ve(e))e.forEach((e=>{so(e,t)}));else if(Se(e))for(const n in e)so(e[n],t);return e}function uo(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Io((()=>{e.isMounted=!0})),Lo((()=>{e.isUnmounting=!0})),e}const po=[Function,Array],fo={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:po,onEnter:po,onAfterEnter:po,onEnterCancelled:po,onBeforeLeave:po,onLeave:po,onAfterLeave:po,onLeaveCancelled:po,onBeforeAppear:po,onAppear:po,onAfterAppear:po,onAppearCancelled:po},setup(e,{slots:t}){const n=ir(),o=uo();let i;return()=>{const r=t.default&&bo(t.default(),!0);if(!r||!r.length)return;let a=r[0];if(r.length>1){let e=!1;for(const t of r)if(t.type!==ki){0,a=t,e=!0;break}}const l=Qt(e),{mode:c}=l;if(o.isLeaving)return _o(a);const s=mo(a);if(!s)return _o(a);const u=vo(s,l,o,n);go(s,u);const d=n.subTree,p=d&&mo(d);let f=!1;const{getTransitionKey:h}=s.type;if(h){const e=h();void 0===i?i=e:e!==i&&(i=e,f=!0)}if(p&&p.type!==ki&&(!Li(s,p)||f)){const e=vo(p,l,o,n);if(go(p,e),"out-in"===c)return o.isLeaving=!0,e.afterLeave=()=>{o.isLeaving=!1,n.update()},_o(a);"in-out"===c&&s.type!==ki&&(e.delayLeave=(e,t,n)=>{ho(o,p)[String(p.key)]=p,e._leaveCb=()=>{t(),e._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=n})}return a}}};function ho(e,t){const{leavingVNodes:n}=e;let o=n.get(t.type);return o||(o=Object.create(null),n.set(t.type,o)),o}function vo(e,t,n,o){const{appear:i,mode:r,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:s,onEnterCancelled:u,onBeforeLeave:d,onLeave:p,onAfterLeave:f,onLeaveCancelled:h,onBeforeAppear:v,onAppear:_,onAfterAppear:m,onAppearCancelled:g}=t,b=String(e.key),y=ho(n,e),w=(e,t)=>{e&&dn(e,o,9,t)},x={mode:r,persisted:a,beforeEnter(t){let o=l;if(!n.isMounted){if(!i)return;o=v||l}t._leaveCb&&t._leaveCb(!0);const r=y[b];r&&Li(e,r)&&r.el._leaveCb&&r.el._leaveCb(),w(o,[t])},enter(e){let t=c,o=s,r=u;if(!n.isMounted){if(!i)return;t=_||c,o=m||s,r=g||u}let a=!1;const l=e._enterCb=t=>{a||(a=!0,w(t?r:o,[e]),x.delayedLeave&&x.delayedLeave(),e._enterCb=void 0)};t?(t(e,l),t.length<=1&&l()):l()},leave(t,o){const i=String(e.key);if(t._enterCb&&t._enterCb(!0),n.isUnmounting)return o();w(d,[t]);let r=!1;const a=t._leaveCb=n=>{r||(r=!0,o(),w(n?h:f,[t]),t._leaveCb=void 0,y[i]===e&&delete y[i])};y[i]=e,p?(p(t,a),p.length<=1&&a()):a()},clone:e=>vo(e,t,n,o)};return x}function _o(e){if(wo(e))return(e=qi(e)).children=null,e}function mo(e){return wo(e)?e.children?e.children[0]:void 0:e}function go(e,t){6&e.shapeFlag&&e.component?go(e.component.subTree,t):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function bo(e,t=!1,n){let o=[],i=0;for(let r=0;r<e.length;r++){let a=e[r];const l=null==n?a.key:String(n)+String(null!=a.key?a.key:r);a.type===wi?(128&a.patchFlag&&i++,o=o.concat(bo(a.children,t,l))):(t||a.type!==ki)&&o.push(null!=l?qi(a,{key:l}):a)}if(i>1)for(let e=0;e<o.length;e++)o[e].patchFlag=-2;return o}const yo=e=>!!e.type.__asyncLoader;const wo=e=>e.type.__isKeepAlive;RegExp,RegExp;function xo(e,t){return he(e)?e.some((e=>xo(e,t))):ge(e)?e.split(",").includes(t):!!e.test&&e.test(t)}function ko(e,t){$o(e,"a",t)}function So(e,t){$o(e,"da",t)}function $o(e,t,n=or){const o=e.__wdc||(e.__wdc=()=>{let t=n;for(;t;){if(t.isDeactivated)return;t=t.parent}return e()});if(Eo(t,o,n),n){let e=n.parent;for(;e&&e.parent;)wo(e.parent.vnode)&&Co(o,t,n,e),e=e.parent}}function Co(e,t,n,o){const i=Eo(t,e,o,!0);Ro((()=>{de(o[t],i)}),n)}function Oo(e){let t=e.shapeFlag;256&t&&256,512&t&&512,e.shapeFlag=t}function To(e){return 128&e.shapeFlag?e.ssContent:e}function Eo(e,t,n=or,o=!1){if(n){const i=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;nt(),rr(n);const i=dn(t,n,e,o);return ar(),ot(),i});return o?i.unshift(r):i.push(r),r}}const Po=e=>(t,n=or)=>(!ur||"sp"===e)&&Eo(e,t,n),Fo=Po("bm"),Io=Po("m"),Ao=Po("bu"),jo=Po("u"),Lo=Po("bum"),Ro=Po("um"),Mo=Po("sp"),Uo=Po("rtg"),Vo=Po("rtc");function Do(e,t=or){Eo("ec",e,t)}let No=!0;function qo(e){const t=Ho(e),n=e.proxy,o=e.ctx;No=!1,t.beforeCreate&&Bo(t.beforeCreate,e,"bc");const{data:i,computed:r,methods:a,watch:l,provide:c,inject:s,created:u,beforeMount:d,mounted:p,beforeUpdate:f,updated:h,activated:v,deactivated:_,beforeDestroy:m,beforeUnmount:g,destroyed:b,unmounted:y,render:w,renderTracked:x,renderTriggered:k,errorCaptured:S,serverPrefetch:$,expose:C,inheritAttrs:O,components:T,directives:E,filters:P}=t;if(s&&function(e,t,n=re,o=!1){he(e)&&(e=Jo(e));for(const n in e){const i=e[n];let r;r=ye(i)?"default"in i?oo(i.from||n,i.default,!0):oo(i.from||n):oo(i),an(r)&&o?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:e=>r.value=e}):t[n]=r}}(s,o,null,e.appContext.config.unwrapInjectedRef),a)for(const e in a){const t=a[e];me(t)&&(o[e]=t.bind(n))}if(i){0;const t=i.call(n,n);0,ye(t)&&(e.data=Wt(t))}if(No=!0,r)for(const e in r){const t=r[e],i=me(t)?t.bind(n,n):me(t.get)?t.get.bind(n,n):re;0;const a=!me(t)&&me(t.set)?t.set.bind(n):re,l=gr({get:i,set:a});Object.defineProperty(o,e,{enumerable:!0,configurable:!0,get:()=>l.value,set:e=>l.value=e})}if(l)for(const e in l)zo(l[e],o,n,e);if(c){const e=me(c)?c.call(n):c;Reflect.ownKeys(e).forEach((t=>{!function(e,t){if(or){let n=or.provides;const o=or.parent&&or.parent.provides;o===n&&(n=or.provides=Object.create(o)),n[e]=t}}(t,e[t])}))}function F(e,t){he(t)?t.forEach((t=>e(t.bind(n)))):t&&e(t.bind(n))}if(u&&Bo(u,e,"c"),F(Fo,d),F(Io,p),F(Ao,f),F(jo,h),F(ko,v),F(So,_),F(Do,S),F(Vo,x),F(Uo,k),F(Lo,g),F(Ro,y),F(Mo,$),he(C))if(C.length){const t=e.exposed||(e.exposed={});C.forEach((e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t})}))}else e.exposed||(e.exposed={});w&&e.render===re&&(e.render=w),null!=O&&(e.inheritAttrs=O),T&&(e.components=T),E&&(e.directives=E)}function Bo(e,t,n){dn(he(e)?e.map((e=>e.bind(t.proxy))):e.bind(t.proxy),t,n)}function zo(e,t,n,o){const i=o.includes(".")?co(n,o):()=>n[o];if(ge(e)){const n=t[e];me(n)&&ro(i,n)}else if(me(e))ro(i,e.bind(n));else if(ye(e))if(he(e))e.forEach((e=>zo(e,t,n,o)));else{const o=me(e.handler)?e.handler.bind(n):t[e.handler];me(o)&&ro(i,o,e)}else 0}function Ho(e){const t=e.type,{mixins:n,extends:o}=t,{mixins:i,optionsCache:r,config:{optionMergeStrategies:a}}=e.appContext,l=r.get(t);let c;return l?c=l:i.length||n||o?(c={},i.length&&i.forEach((e=>Wo(c,e,a,!0))),Wo(c,t,a)):c=t,r.set(t,c),c}function Wo(e,t,n,o=!1){const{mixins:i,extends:r}=t;r&&Wo(e,r,n,!0),i&&i.forEach((t=>Wo(e,t,n,!0)));for(const i in t)if(o&&"expose"===i);else{const o=Go[i]||n&&n[i];e[i]=o?o(e[i],t[i]):t[i]}return e}const Go={data:Ko,props:Yo,emits:Yo,methods:Yo,computed:Yo,beforeCreate:Zo,created:Zo,beforeMount:Zo,mounted:Zo,beforeUpdate:Zo,updated:Zo,beforeDestroy:Zo,beforeUnmount:Zo,destroyed:Zo,unmounted:Zo,activated:Zo,deactivated:Zo,errorCaptured:Zo,serverPrefetch:Zo,components:Yo,directives:Yo,watch:function(e,t){if(!e)return t;if(!t)return e;const n=ue(Object.create(null),e);for(const o in t)n[o]=Zo(e[o],t[o]);return n},provide:Ko,inject:function(e,t){return Yo(Jo(e),Jo(t))}};function Ko(e,t){return t?e?function(){return ue(me(e)?e.call(this,this):e,me(t)?t.call(this,this):t)}:t:e}function Jo(e){if(he(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Zo(e,t){return e?[...new Set([].concat(e,t))]:t}function Yo(e,t){return e?ue(ue(Object.create(null),e),t):t}function Xo(e,t,n,o=!1){const i={},r={};Re(r,Ri,1),e.propsDefaults=Object.create(null),Qo(e,t,i,r);for(const t in e.propsOptions[0])t in i||(i[t]=void 0);n?e.props=o?i:Kt(i,!1,bt,Vt,qt):e.type.props?e.props=i:e.props=r,e.attrs=r}function Qo(e,t,n,o){const[i,r]=e.propsOptions;let a,l=!1;if(t)for(let c in t){if(Ce(c))continue;const s=t[c];let u;i&&fe(i,u=Ee(c))?r&&r.includes(u)?(a||(a={}))[u]=s:n[u]=s:Wn(e.emitsOptions,c)||c in o&&s===o[c]||(o[c]=s,l=!0)}if(r){const t=Qt(n),o=a||oe;for(let a=0;a<r.length;a++){const l=r[a];n[l]=ei(i,t,l,o[l],e,!fe(o,l))}}return l}function ei(e,t,n,o,i,r){const a=e[n];if(null!=a){const e=fe(a,"default");if(e&&void 0===o){const e=a.default;if(a.type!==Function&&me(e)){const{propsDefaults:r}=i;n in r?o=r[n]:(rr(i),o=r[n]=e.call(null,t),ar())}else o=e}a[0]&&(r&&!e?o=!1:!a[1]||""!==o&&o!==Fe(n)||(o=!0))}return o}function ti(e,t,n=!1){const o=t.propsCache,i=o.get(e);if(i)return i;const r=e.props,a={},l=[];let c=!1;if(__VUE_OPTIONS_API__&&!me(e)){const o=e=>{c=!0;const[n,o]=ti(e,t,!0);ue(a,n),o&&l.push(...o)};!n&&t.mixins.length&&t.mixins.forEach(o),e.extends&&o(e.extends),e.mixins&&e.mixins.forEach(o)}if(!r&&!c)return o.set(e,ie),ie;if(he(r))for(let e=0;e<r.length;e++){0;const t=Ee(r[e]);ni(t)&&(a[t]=oe)}else if(r){0;for(const e in r){const t=Ee(e);if(ni(t)){const n=r[e],o=a[t]=he(n)||me(n)?{type:n}:n;if(o){const e=ri(Boolean,o.type),n=ri(String,o.type);o[0]=e>-1,o[1]=n<0||e<n,(e>-1||fe(o,"default"))&&l.push(t)}}}}const s=[a,l];return o.set(e,s),s}function ni(e){return"$"!==e[0]}function oi(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:null===e?"null":""}function ii(e,t){return oi(e)===oi(t)}function ri(e,t){return he(t)?t.findIndex((t=>ii(t,e))):me(t)&&ii(t,e)?0:-1}const ai=e=>"_"===e[0]||"$stable"===e,li=e=>he(e)?e.map(Wi):[Wi(e)],ci=(e,t,n)=>{const o=Zn(((...e)=>li(t(...e))),n);return o._c=!1,o},si=(e,t,n)=>{const o=e._ctx;for(const n in e){if(ai(n))continue;const i=e[n];if(me(i))t[n]=ci(0,i,o);else if(null!=i){0;const e=li(i);t[n]=()=>e}}},ui=(e,t)=>{const n=li(t);e.slots.default=()=>n};function di(e,t,n,o){const i=e.dirs,r=t&&t.dirs;for(let a=0;a<i.length;a++){const l=i[a];r&&(l.oldValue=r[a].value);let c=l.dir[o];c&&(nt(),dn(c,n,8,[e.el,l,e,t]),ot())}}function pi(){return{app:null,config:{isNativeTag:ae,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let fi=0;function hi(e,t){return function(n,o=null){me(n)||(n=Object.assign({},n)),null==o||ye(o)||(o=null);const i=pi(),r=new Set;let a=!1;const l=i.app={_uid:fi++,_component:n,_props:o,_container:null,_context:i,_instance:null,version:br,get config(){return i.config},set config(e){0},use:(e,...t)=>(r.has(e)||(e&&me(e.install)?(r.add(e),e.install(l,...t)):me(e)&&(r.add(e),e(l,...t))),l),mixin:e=>(__VUE_OPTIONS_API__&&(i.mixins.includes(e)||i.mixins.push(e)),l),component:(e,t)=>t?(i.components[e]=t,l):i.components[e],directive:(e,t)=>t?(i.directives[e]=t,l):i.directives[e],mount(r,c,s){if(!a){const u=Di(n,o);return u.appContext=i,c&&t?t(u,r):e(u,r,s),a=!0,l._container=r,r.__vue_app__=l,__VUE_PROD_DEVTOOLS__&&(l._instance=u.component,function(e,t){Un("app:init",e,t,{Fragment:wi,Text:xi,Comment:ki,Static:Si})}(l,br)),vr(u.component)||u.component.proxy}},unmount(){a&&(e(null,l._container),__VUE_PROD_DEVTOOLS__&&(l._instance=null,function(e){Un("app:unmount",e)}(l)),delete l._container.__vue_app__)},provide:(e,t)=>(i.provides[e]=t,l)};return l}}function vi(e,t,n,o,i=!1){if(he(e))return void e.forEach(((e,r)=>vi(e,t&&(he(t)?t[r]:t),n,o,i)));if(yo(o)&&!i)return;const r=4&o.shapeFlag?vr(o.component)||o.component.proxy:o.el,a=i?null:r,{i:l,r:c}=e;const s=t&&t.r,u=l.refs===oe?l.refs={}:l.refs,d=l.setupState;if(null!=s&&s!==c&&(ge(s)?(u[s]=null,fe(d,s)&&(d[s]=null)):an(s)&&(s.value=null)),me(c))un(c,l,12,[a,u]);else{const t=ge(c),o=an(c);if(t||o){const o=()=>{if(e.f){const n=t?u[c]:c.value;i?he(n)&&de(n,r):he(n)?n.includes(r)||n.push(r):t?(u[c]=[r],fe(d,c)&&(d[c]=u[c])):(c.value=[r],e.k&&(u[e.k]=c.value))}else t?(u[c]=a,fe(d,c)&&(d[c]=a)):an(c)&&(c.value=a,e.k&&(u[e.k]=a))};a?(o.id=-1,_i(o,n)):o()}else 0}}const _i=no;function mi(e,t){"boolean"!=typeof __VUE_OPTIONS_API__&&(Ve().__VUE_OPTIONS_API__=!0),"boolean"!=typeof __VUE_PROD_DEVTOOLS__&&(Ve().__VUE_PROD_DEVTOOLS__=!1);const n=Ve();n.__VUE__=!0,__VUE_PROD_DEVTOOLS__&&Vn(n.__VUE_DEVTOOLS_GLOBAL_HOOK__,n);const{insert:o,remove:i,patchProp:r,createElement:a,createText:l,createComment:c,setText:s,setElementText:u,parentNode:d,nextSibling:p,setScopeId:f=re,cloneNode:h,insertStaticContent:v}=e,_=(e,t,n,o=null,i=null,r=null,a=!1,l=null,c=!!t.dynamicChildren)=>{if(e===t)return;e&&!Li(e,t)&&(o=B(e),U(e,i,r,!0),e=null),-2===t.patchFlag&&(c=!1,t.dynamicChildren=null);const{type:s,ref:u,shapeFlag:d}=t;switch(s){case xi:m(e,t,n,o);break;case ki:g(e,t,n,o);break;case Si:null==e&&b(t,n,o,a);break;case wi:T(e,t,n,o,i,r,a,l,c);break;default:1&d?w(e,t,n,o,i,r,a,l,c):6&d?E(e,t,n,o,i,r,a,l,c):(64&d||128&d)&&s.process(e,t,n,o,i,r,a,l,c,H)}null!=u&&i&&vi(u,e&&e.ref,r,t||e,!t)},m=(e,t,n,i)=>{if(null==e)o(t.el=l(t.children),n,i);else{const n=t.el=e.el;t.children!==e.children&&s(n,t.children)}},g=(e,t,n,i)=>{null==e?o(t.el=c(t.children||""),n,i):t.el=e.el},b=(e,t,n,o)=>{[e.el,e.anchor]=v(e.children,t,n,o,e.el,e.anchor)},y=({el:e,anchor:t})=>{let n;for(;e&&e!==t;)n=p(e),i(e),e=n;i(t)},w=(e,t,n,o,i,r,a,l,c)=>{a=a||"svg"===t.type,null==e?x(t,n,o,i,r,a,l,c):$(e,t,i,r,a,l,c)},x=(e,t,n,i,l,c,s,d)=>{let p,f;const{type:v,props:_,shapeFlag:m,transition:g,patchFlag:b,dirs:y}=e;if(e.el&&void 0!==h&&-1===b)p=e.el=h(e.el);else{if(p=e.el=a(e.type,c,_&&_.is,_),8&m?u(p,e.children):16&m&&S(e.children,p,null,i,l,c&&"foreignObject"!==v,s,d),y&&di(e,null,i,"created"),_){for(const t in _)"value"===t||Ce(t)||r(p,t,null,_[t],c,e.children,i,l,q);"value"in _&&r(p,"value",null,_.value),(f=_.onVnodeBeforeMount)&&Ji(f,i,e)}k(p,e,e.scopeId,s,i)}__VUE_PROD_DEVTOOLS__&&(Object.defineProperty(p,"__vnode",{value:e,enumerable:!1}),Object.defineProperty(p,"__vueParentComponent",{value:i,enumerable:!1})),y&&di(e,null,i,"beforeMount");const w=(!l||l&&!l.pendingBranch)&&g&&!g.persisted;w&&g.beforeEnter(p),o(p,t,n),((f=_&&_.onVnodeMounted)||w||y)&&_i((()=>{f&&Ji(f,i,e),w&&g.enter(p),y&&di(e,null,i,"mounted")}),l)},k=(e,t,n,o,i)=>{if(n&&f(e,n),o)for(let t=0;t<o.length;t++)f(e,o[t]);if(i){if(t===i.subTree){const t=i.vnode;k(e,t,t.scopeId,t.slotScopeIds,i.parent)}}},S=(e,t,n,o,i,r,a,l,c=0)=>{for(let s=c;s<e.length;s++){const c=e[s]=l?Gi(e[s]):Wi(e[s]);_(null,c,t,n,o,i,r,a,l)}},$=(e,t,n,o,i,a,l)=>{const c=t.el=e.el;let{patchFlag:s,dynamicChildren:d,dirs:p}=t;s|=16&e.patchFlag;const f=e.props||oe,h=t.props||oe;let v;n&&gi(n,!1),(v=h.onVnodeBeforeUpdate)&&Ji(v,n,t,e),p&&di(t,e,n,"beforeUpdate"),n&&gi(n,!0);const _=i&&"foreignObject"!==t.type;if(d?C(e.dynamicChildren,d,c,n,o,_,a):l||j(e,t,c,null,n,o,_,a,!1),s>0){if(16&s)O(c,t,f,h,n,o,i);else if(2&s&&f.class!==h.class&&r(c,"class",null,h.class,i),4&s&&r(c,"style",f.style,h.style,i),8&s){const a=t.dynamicProps;for(let t=0;t<a.length;t++){const l=a[t],s=f[l],u=h[l];u===s&&"value"!==l||r(c,l,s,u,i,e.children,n,o,q)}}1&s&&e.children!==t.children&&u(c,t.children)}else l||null!=d||O(c,t,f,h,n,o,i);((v=h.onVnodeUpdated)||p)&&_i((()=>{v&&Ji(v,n,t,e),p&&di(t,e,n,"updated")}),o)},C=(e,t,n,o,i,r,a)=>{for(let l=0;l<t.length;l++){const c=e[l],s=t[l],u=c.el&&(c.type===wi||!Li(c,s)||70&c.shapeFlag)?d(c.el):n;_(c,s,u,null,o,i,r,a,!0)}},O=(e,t,n,o,i,a,l)=>{if(n!==o){for(const c in o){if(Ce(c))continue;const s=o[c],u=n[c];s!==u&&"value"!==c&&r(e,c,u,s,l,t.children,i,a,q)}if(n!==oe)for(const c in n)Ce(c)||c in o||r(e,c,n[c],null,l,t.children,i,a,q);"value"in o&&r(e,"value",n.value,o.value)}},T=(e,t,n,i,r,a,c,s,u)=>{const d=t.el=e?e.el:l(""),p=t.anchor=e?e.anchor:l("");let{patchFlag:f,dynamicChildren:h,slotScopeIds:v}=t;v&&(s=s?s.concat(v):v),null==e?(o(d,n,i),o(p,n,i),S(t.children,n,p,r,a,c,s,u)):f>0&&64&f&&h&&e.dynamicChildren?(C(e.dynamicChildren,h,n,r,a,c,s),(null!=t.key||r&&t===r.subTree)&&bi(e,t,!0)):j(e,t,n,p,r,a,c,s,u)},E=(e,t,n,o,i,r,a,l,c)=>{t.slotScopeIds=l,null==e?512&t.shapeFlag?i.ctx.activate(t,n,o,a,c):P(t,n,o,i,r,a,c):F(e,t,c)},P=(e,t,n,o,i,r,a)=>{const l=e.component=nr(e,o,i);if(wo(e)&&(l.ctx.renderer=H),dr(l),l.asyncDep){if(i&&i.registerDep(l,I),!e.el){const e=l.subTree=Di(ki);g(null,e,t,n)}}else I(l,e,t,n,i,r,a)},F=(e,t,n)=>{const o=t.component=e.component;if(function(e,t,n){const{props:o,children:i,component:r}=e,{props:a,children:l,patchFlag:c}=t,s=r.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&c>=0))return!(!i&&!l||l&&l.$stable)||o!==a&&(o?!a||eo(o,a,s):!!a);if(1024&c)return!0;if(16&c)return o?eo(o,a,s):!!a;if(8&c){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(a[n]!==o[n]&&!Wn(s,n))return!0}}return!1}(e,t,n)){if(o.asyncDep&&!o.asyncResolved)return void A(o,t,n);o.next=t,function(e){const t=vn.indexOf(e);t>_n&&vn.splice(t,1)}(o.update),o.update()}else t.component=e.component,t.el=e.el,o.vnode=t},I=(e,t,n,o,i,r,a)=>{const l=e.effect=new Xe((()=>{if(e.isMounted){let t,{next:n,bu:o,u:l,parent:c,vnode:s}=e,u=n;0,gi(e,!1),n?(n.el=s.el,A(e,n,a)):n=s,o&&Le(o),(t=n.props&&n.props.onVnodeBeforeUpdate)&&Ji(t,c,n,s),gi(e,!0);const p=Yn(e);0;const f=e.subTree;e.subTree=p,_(f,p,d(f.el),B(f),e,i,r),n.el=p.el,null===u&&to(e,p.el),l&&_i(l,i),(t=n.props&&n.props.onVnodeUpdated)&&_i((()=>Ji(t,c,n,s)),i),__VUE_PROD_DEVTOOLS__&&Nn(e)}else{let a;const{el:l,props:c}=t,{bm:s,m:u,parent:d}=e,p=yo(t);if(gi(e,!1),s&&Le(s),!p&&(a=c&&c.onVnodeBeforeMount)&&Ji(a,d,t),gi(e,!0),l&&G){const n=()=>{e.subTree=Yn(e),G(l,e.subTree,e,i,null)};p?t.type.__asyncLoader().then((()=>!e.isUnmounted&&n())):n()}else{0;const a=e.subTree=Yn(e);0,_(null,a,n,o,e,i,r),t.el=a.el}if(u&&_i(u,i),!p&&(a=c&&c.onVnodeMounted)){const e=t;_i((()=>Ji(a,d,e)),i)}256&t.shapeFlag&&e.a&&_i(e.a,i),e.isMounted=!0,__VUE_PROD_DEVTOOLS__&&Dn(e),t=n=o=null}}),(()=>On(e.update)),e.scope),c=e.update=l.run.bind(l);c.id=e.uid,gi(e,!0),c()},A=(e,t,n)=>{t.component=e;const o=e.vnode.props;e.vnode=t,e.next=null,function(e,t,n,o){const{props:i,attrs:r,vnode:{patchFlag:a}}=e,l=Qt(i),[c]=e.propsOptions;let s=!1;if(!(o||a>0)||16&a){let o;Qo(e,t,i,r)&&(s=!0);for(const r in l)t&&(fe(t,r)||(o=Fe(r))!==r&&fe(t,o))||(c?!n||void 0===n[r]&&void 0===n[o]||(i[r]=ei(c,l,r,void 0,e,!0)):delete i[r]);if(r!==l)for(const e in r)t&&fe(t,e)||(delete r[e],s=!0)}else if(8&a){const n=e.vnode.dynamicProps;for(let o=0;o<n.length;o++){let a=n[o];if(Wn(e.emitsOptions,a))continue;const u=t[a];if(c)if(fe(r,a))u!==r[a]&&(r[a]=u,s=!0);else{const t=Ee(a);i[t]=ei(c,l,t,u,e,!1)}else u!==r[a]&&(r[a]=u,s=!0)}}s&&at(e,"set","$attrs")}(e,t.props,o,n),((e,t,n)=>{const{vnode:o,slots:i}=e;let r=!0,a=oe;if(32&o.shapeFlag){const e=t._;e?n&&1===e?r=!1:(ue(i,t),n||1!==e||delete i._):(r=!t.$stable,si(t,i)),a=t}else t&&(ui(e,t),a={default:1});if(r)for(const e in i)ai(e)||e in a||delete i[e]})(e,t.children,n),nt(),Fn(void 0,e.update),ot()},j=(e,t,n,o,i,r,a,l,c=!1)=>{const s=e&&e.children,d=e?e.shapeFlag:0,p=t.children,{patchFlag:f,shapeFlag:h}=t;if(f>0){if(128&f)return void R(s,p,n,o,i,r,a,l,c);if(256&f)return void L(s,p,n,o,i,r,a,l,c)}8&h?(16&d&&q(s,i,r),p!==s&&u(n,p)):16&d?16&h?R(s,p,n,o,i,r,a,l,c):q(s,i,r,!0):(8&d&&u(n,""),16&h&&S(p,n,o,i,r,a,l,c))},L=(e,t,n,o,i,r,a,l,c)=>{t=t||ie;const s=(e=e||ie).length,u=t.length,d=Math.min(s,u);let p;for(p=0;p<d;p++){const o=t[p]=c?Gi(t[p]):Wi(t[p]);_(e[p],o,n,null,i,r,a,l,c)}s>u?q(e,i,r,!0,!1,d):S(t,n,o,i,r,a,l,c,d)},R=(e,t,n,o,i,r,a,l,c)=>{let s=0;const u=t.length;let d=e.length-1,p=u-1;for(;s<=d&&s<=p;){const o=e[s],u=t[s]=c?Gi(t[s]):Wi(t[s]);if(!Li(o,u))break;_(o,u,n,null,i,r,a,l,c),s++}for(;s<=d&&s<=p;){const o=e[d],s=t[p]=c?Gi(t[p]):Wi(t[p]);if(!Li(o,s))break;_(o,s,n,null,i,r,a,l,c),d--,p--}if(s>d){if(s<=p){const e=p+1,d=e<u?t[e].el:o;for(;s<=p;)_(null,t[s]=c?Gi(t[s]):Wi(t[s]),n,d,i,r,a,l,c),s++}}else if(s>p)for(;s<=d;)U(e[s],i,r,!0),s++;else{const f=s,h=s,v=new Map;for(s=h;s<=p;s++){const e=t[s]=c?Gi(t[s]):Wi(t[s]);null!=e.key&&v.set(e.key,s)}let m,g=0;const b=p-h+1;let y=!1,w=0;const x=new Array(b);for(s=0;s<b;s++)x[s]=0;for(s=f;s<=d;s++){const o=e[s];if(g>=b){U(o,i,r,!0);continue}let u;if(null!=o.key)u=v.get(o.key);else for(m=h;m<=p;m++)if(0===x[m-h]&&Li(o,t[m])){u=m;break}void 0===u?U(o,i,r,!0):(x[u-h]=s+1,u>=w?w=u:y=!0,_(o,t[u],n,null,i,r,a,l,c),g++)}const k=y?function(e){const t=e.slice(),n=[0];let o,i,r,a,l;const c=e.length;for(o=0;o<c;o++){const c=e[o];if(0!==c){if(i=n[n.length-1],e[i]<c){t[o]=i,n.push(o);continue}for(r=0,a=n.length-1;r<a;)l=r+a>>1,e[n[l]]<c?r=l+1:a=l;c<e[n[r]]&&(r>0&&(t[o]=n[r-1]),n[r]=o)}}r=n.length,a=n[r-1];for(;r-- >0;)n[r]=a,a=t[a];return n}(x):ie;for(m=k.length-1,s=b-1;s>=0;s--){const e=h+s,d=t[e],p=e+1<u?t[e+1].el:o;0===x[s]?_(null,d,n,p,i,r,a,l,c):y&&(m<0||s!==k[m]?M(d,n,p,2):m--)}}},M=(e,t,n,i,r=null)=>{const{el:a,type:l,transition:c,children:s,shapeFlag:u}=e;if(6&u)return void M(e.component.subTree,t,n,i);if(128&u)return void e.suspense.move(t,n,i);if(64&u)return void l.move(e,t,n,H);if(l===wi){o(a,t,n);for(let e=0;e<s.length;e++)M(s[e],t,n,i);return void o(e.anchor,t,n)}if(l===Si)return void(({el:e,anchor:t},n,i)=>{let r;for(;e&&e!==t;)r=p(e),o(e,n,i),e=r;o(t,n,i)})(e,t,n);if(2!==i&&1&u&&c)if(0===i)c.beforeEnter(a),o(a,t,n),_i((()=>c.enter(a)),r);else{const{leave:e,delayLeave:i,afterLeave:r}=c,l=()=>o(a,t,n),s=()=>{e(a,(()=>{l(),r&&r()}))};i?i(a,l,s):s()}else o(a,t,n)},U=(e,t,n,o=!1,i=!1)=>{const{type:r,props:a,ref:l,children:c,dynamicChildren:s,shapeFlag:u,patchFlag:d,dirs:p}=e;if(null!=l&&vi(l,null,n,e,!0),256&u)return void t.ctx.deactivate(e);const f=1&u&&p,h=!yo(e);let v;if(h&&(v=a&&a.onVnodeBeforeUnmount)&&Ji(v,t,e),6&u)N(e.component,n,o);else{if(128&u)return void e.suspense.unmount(n,o);f&&di(e,null,t,"beforeUnmount"),64&u?e.type.remove(e,t,n,i,H,o):s&&(r!==wi||d>0&&64&d)?q(s,t,n,!1,!0):(r===wi&&384&d||!i&&16&u)&&q(c,t,n),o&&V(e)}(h&&(v=a&&a.onVnodeUnmounted)||f)&&_i((()=>{v&&Ji(v,t,e),f&&di(e,null,t,"unmounted")}),n)},V=e=>{const{type:t,el:n,anchor:o,transition:r}=e;if(t===wi)return void D(n,o);if(t===Si)return void y(e);const a=()=>{i(n),r&&!r.persisted&&r.afterLeave&&r.afterLeave()};if(1&e.shapeFlag&&r&&!r.persisted){const{leave:t,delayLeave:o}=r,i=()=>t(n,a);o?o(e.el,a,i):i()}else a()},D=(e,t)=>{let n;for(;e!==t;)n=p(e),i(e),e=n;i(t)},N=(e,t,n)=>{const{bum:o,scope:i,update:r,subTree:a,um:l}=e;o&&Le(o),i.stop(),r&&(r.active=!1,U(a,e,t,n)),l&&_i(l,t),_i((()=>{e.isUnmounted=!0}),t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve()),__VUE_PROD_DEVTOOLS__&&qn(e)},q=(e,t,n,o=!1,i=!1,r=0)=>{for(let a=r;a<e.length;a++)U(e[a],t,n,o,i)},B=e=>6&e.shapeFlag?B(e.component.subTree):128&e.shapeFlag?e.suspense.next():p(e.anchor||e.el),z=(e,t,n)=>{null==e?t._vnode&&U(t._vnode,null,null,!0):_(t._vnode||null,e,t,null,null,null,n),In(),t._vnode=e},H={p:_,um:U,m:M,r:V,mt:P,mc:S,pc:j,pbc:C,n:B,o:e};let W,G;return t&&([W,G]=t(H)),{render:z,hydrate:W,createApp:hi(z,W)}}function gi({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function bi(e,t,n=!1){const o=e.children,i=t.children;if(he(o)&&he(i))for(let e=0;e<o.length;e++){const t=o[e];let r=i[e];1&r.shapeFlag&&!r.dynamicChildren&&((r.patchFlag<=0||32===r.patchFlag)&&(r=i[e]=Gi(i[e]),r.el=t.el),n||bi(t,r))}}const yi=Symbol();const wi=Symbol(void 0),xi=Symbol(void 0),ki=Symbol(void 0),Si=Symbol(void 0),$i=[];let Ci=null;function Oi(e=!1){$i.push(Ci=e?null:[])}function Ti(){$i.pop(),Ci=$i[$i.length-1]||null}let Ei=1;function Pi(e){Ei+=e}function Fi(e){return e.dynamicChildren=Ei>0?Ci||ie:null,Ti(),Ei>0&&Ci&&Ci.push(e),e}function Ii(e,t,n,o,i,r){return Fi(Vi(e,t,n,o,i,r,!0))}function Ai(e,t,n,o,i){return Fi(Di(e,t,n,o,i,!0))}function ji(e){return!!e&&!0===e.__v_isVNode}function Li(e,t){return e.type===t.type&&e.key===t.key}const Ri="__vInternal",Mi=({key:e})=>null!=e?e:null,Ui=({ref:e,ref_key:t,ref_for:n})=>null!=e?ge(e)||an(e)||me(e)?{i:Gn,r:e,k:t,f:!!n}:e:null;function Vi(e,t=null,n=null,o=0,i=null,r=(e===wi?0:1),a=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Mi(t),ref:t&&Ui(t),scopeId:Kn,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:o,dynamicProps:i,dynamicChildren:null,appContext:null};return l?(Ki(c,n),128&r&&e.normalize(c)):n&&(c.shapeFlag|=ge(n)?8:16),Ei>0&&!a&&Ci&&(c.patchFlag>0||6&r)&&32!==c.patchFlag&&Ci.push(c),c}const Di=Ni;function Ni(e,t=null,n=null,o=0,i=null,r=!1){if(e&&e!==yi||(e=ki),ji(e)){const o=qi(e,t,!0);return n&&Ki(o,n),o}if(mr(e)&&(e=e.__vccOpts),t){t=function(e){return e?Xt(e)||Ri in e?ue({},e):e:null}(t);let{class:e,style:n}=t;e&&!ge(e)&&(t.class=te(e)),ye(n)&&(Xt(n)&&!he(n)&&(n=ue({},n)),t.style=Y(n))}return Vi(e,t,n,o,i,ge(e)?1:(e=>e.__isSuspense)(e)?128:(e=>e.__isTeleport)(e)?64:ye(e)?4:me(e)?2:0,r,!0)}function qi(e,t,n=!1){const{props:o,ref:i,patchFlag:r,children:a}=e,l=t?function(...e){const t={};for(let n=0;n<e.length;n++){const o=e[n];for(const e in o)if("class"===e)t.class!==o.class&&(t.class=te([t.class,o.class]));else if("style"===e)t.style=Y([t.style,o.style]);else if(ce(e)){const n=t[e],i=o[e];!i||n===i||he(n)&&n.includes(i)||(t[e]=n?[].concat(n,i):i)}else""!==e&&(t[e]=o[e])}return t}(o||{},t):o;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&Mi(l),ref:t&&t.ref?n&&i?he(i)?i.concat(Ui(t)):[i,Ui(t)]:Ui(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==wi?-1===r?16:16|r:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&qi(e.ssContent),ssFallback:e.ssFallback&&qi(e.ssFallback),el:e.el,anchor:e.anchor}}function Bi(e=" ",t=0){return Di(xi,null,e,t)}function zi(e,t){const n=Di(Si,null,e);return n.staticCount=t,n}function Hi(e="",t=!1){return t?(Oi(),Ai(ki,null,e)):Di(ki,null,e)}function Wi(e){return null==e||"boolean"==typeof e?Di(ki):he(e)?Di(wi,null,e.slice()):"object"==typeof e?Gi(e):Di(xi,null,String(e))}function Gi(e){return null===e.el||e.memo?e:qi(e)}function Ki(e,t){let n=0;const{shapeFlag:o}=e;if(null==t)t=null;else if(he(t))n=16;else if("object"==typeof t){if(65&o){const n=t.default;return void(n&&(n._c&&(n._d=!1),Ki(e,n()),n._c&&(n._d=!0)))}{n=32;const o=t._;o||Ri in t?3===o&&Gn&&(1===Gn.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=Gn}}else me(t)?(t={default:t,_ctx:Gn},n=32):(t=String(t),64&o?(n=16,t=[Bi(t)]):n=8);e.children=t,e.shapeFlag|=n}function Ji(e,t,n,o=null){dn(e,t,7,[n,o])}function Zi(e,t,n,o){let i;const r=n&&n[o];if(he(e)||ge(e)){i=new Array(e.length);for(let n=0,o=e.length;n<o;n++)i[n]=t(e[n],n,void 0,r&&r[n])}else if("number"==typeof e){0,i=new Array(e);for(let n=0;n<e;n++)i[n]=t(n+1,n,void 0,r&&r[n])}else if(ye(e))if(e[Symbol.iterator])i=Array.from(e,((e,n)=>t(e,n,void 0,r&&r[n])));else{const n=Object.keys(e);i=new Array(n.length);for(let o=0,a=n.length;o<a;o++){const a=n[o];i[o]=t(e[a],a,o,r&&r[o])}}else i=[];return n&&(n[o]=i),i}const Yi=e=>e?lr(e)?vr(e)||e.proxy:Yi(e.parent):null,Xi=ue(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Yi(e.parent),$root:e=>Yi(e.root),$emit:e=>e.emit,$options:e=>__VUE_OPTIONS_API__?Ho(e):e.type,$forceUpdate:e=>()=>On(e.update),$nextTick:e=>Cn.bind(e.proxy),$watch:e=>__VUE_OPTIONS_API__?lo.bind(e):re}),Qi={get({_:e},t){const{ctx:n,setupState:o,data:i,props:r,accessCache:a,type:l,appContext:c}=e;let s;if("$"!==t[0]){const l=a[t];if(void 0!==l)switch(l){case 1:return o[t];case 2:return i[t];case 4:return n[t];case 3:return r[t]}else{if(o!==oe&&fe(o,t))return a[t]=1,o[t];if(i!==oe&&fe(i,t))return a[t]=2,i[t];if((s=e.propsOptions[0])&&fe(s,t))return a[t]=3,r[t];if(n!==oe&&fe(n,t))return a[t]=4,n[t];__VUE_OPTIONS_API__&&!No||(a[t]=0)}}const u=Xi[t];let d,p;return u?("$attrs"===t&&it(e,0,t),u(e)):(d=l.__cssModules)&&(d=d[t])?d:n!==oe&&fe(n,t)?(a[t]=4,n[t]):(p=c.config.globalProperties,fe(p,t)?p[t]:void 0)},set({_:e},t,n){const{data:o,setupState:i,ctx:r}=e;return i!==oe&&fe(i,t)?(i[t]=n,!0):o!==oe&&fe(o,t)?(o[t]=n,!0):!fe(e.props,t)&&(("$"!==t[0]||!(t.slice(1)in e))&&(r[t]=n,!0))},has({_:{data:e,setupState:t,accessCache:n,ctx:o,appContext:i,propsOptions:r}},a){let l;return!!n[a]||e!==oe&&fe(e,a)||t!==oe&&fe(t,a)||(l=r[0])&&fe(l,a)||fe(o,a)||fe(Xi,a)||fe(i.config.globalProperties,a)},defineProperty(e,t,n){return null!=n.get?e._.accessCache[t]=0:fe(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};const er=pi();let tr=0;function nr(e,t,n){const o=e.type,i=(t?t.appContext:e.appContext)||er,r={uid:tr++,vnode:e,type:o,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new Ne(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ti(o,i),emitsOptions:Hn(o,i),emit:null,emitted:null,propsDefaults:oe,inheritAttrs:o.inheritAttrs,ctx:oe,data:oe,props:oe,attrs:oe,slots:oe,refs:oe,setupState:oe,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=zn.bind(null,r),e.ce&&e.ce(r),r}let or=null;const ir=()=>or||Gn,rr=e=>{or=e,e.scope.on()},ar=()=>{or&&or.scope.off(),or=null};function lr(e){return 4&e.vnode.shapeFlag}let cr,sr,ur=!1;function dr(e,t=!1){ur=t;const{props:n,children:o}=e.vnode,i=lr(e);Xo(e,n,i,t),((e,t)=>{if(32&e.vnode.shapeFlag){const n=t._;n?(e.slots=Qt(t),Re(t,"_",n)):si(t,e.slots={})}else e.slots={},t&&ui(e,t);Re(e.slots,Ri,1)})(e,o);const r=i?function(e,t){const n=e.type;0;e.accessCache=Object.create(null),e.proxy=en(new Proxy(e.ctx,Qi)),!1;const{setup:o}=n;if(o){const n=e.setupContext=o.length>1?hr(e):null;rr(e),nt();const i=un(o,e,0,[e.props,n]);if(ot(),ar(),we(i)){if(i.then(ar,ar),t)return i.then((n=>{pr(e,n,t)})).catch((t=>{pn(t,e,0)}));e.asyncDep=i}else pr(e,i,t)}else fr(e,t)}(e,t):void 0;return ur=!1,r}function pr(e,t,n){me(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:ye(t)&&(__VUE_PROD_DEVTOOLS__&&(e.devtoolsRawSetupState=t),e.setupState=cn(t)),fr(e,n)}function fr(e,t,n){const o=e.type;if(!e.render){if(!t&&cr&&!o.render){const t=o.template;if(t){0;const{isCustomElement:n,compilerOptions:i}=e.appContext.config,{delimiters:r,compilerOptions:a}=o,l=ue(ue({isCustomElement:n,delimiters:r},i),a);o.render=cr(t,l)}}e.render=o.render||re,sr&&sr(e)}__VUE_OPTIONS_API__&&(rr(e),nt(),qo(e),ot(),ar())}function hr(e){const t=t=>{e.exposed=t||{}};let n;return{get attrs(){return n||(n=function(e){return new Proxy(e.attrs,{get:(t,n)=>(it(e,0,"$attrs"),t[n])})}(e))},slots:e.slots,emit:e.emit,expose:t}}function vr(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(cn(en(e.exposed)),{get:(t,n)=>n in t?t[n]:n in Xi?Xi[n](e):void 0}))}function _r(e){return me(e)&&e.displayName||e.name}function mr(e){return me(e)&&"__vccOpts"in e}const gr=(e,t)=>function(e,t,n=!1){let o,i;const r=me(e);return r?(o=e,i=re):(o=e.get,i=e.set),new sn(o,i,r||!i,n)}(e,0,ur);Symbol("");const br="3.2.33",yr="undefined"!=typeof document?document:null,wr=yr&&yr.createElement("template"),xr={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,o)=>{const i=t?yr.createElementNS("http://www.w3.org/2000/svg",e):yr.createElement(e,n?{is:n}:void 0);return"select"===e&&o&&null!=o.multiple&&i.setAttribute("multiple",o.multiple),i},createText:e=>yr.createTextNode(e),createComment:e=>yr.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>yr.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,n,o,i,r){const a=n?n.previousSibling:t.lastChild;if(i&&(i===r||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),i!==r&&(i=i.nextSibling););else{wr.innerHTML=o?`<svg>${e}</svg>`:e;const i=wr.content;if(o){const e=i.firstChild;for(;e.firstChild;)i.appendChild(e.firstChild);i.removeChild(e)}t.insertBefore(i,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};const kr=/\s*!important$/;function Sr(e,t,n){if(he(n))n.forEach((n=>Sr(e,t,n)));else if(null==n&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const o=function(e,t){const n=Cr[t];if(n)return n;let o=Ee(t);if("filter"!==o&&o in e)return Cr[t]=o;o=Ie(o);for(let n=0;n<$r.length;n++){const i=$r[n]+o;if(i in e)return Cr[t]=i}return t}(e,t);kr.test(n)?e.setProperty(Fe(o),n.replace(kr,""),"important"):e[o]=n}}const $r=["Webkit","Moz","ms"],Cr={};const Or="http://www.w3.org/1999/xlink";const[Tr,Er]=(()=>{let e=Date.now,t=!1;if("undefined"!=typeof window){Date.now()>document.createEvent("Event").timeStamp&&(e=()=>performance.now());const n=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(n&&Number(n[1])<=53)}return[e,t]})();let Pr=0;const Fr=Promise.resolve(),Ir=()=>{Pr=0};function Ar(e,t,n,o){e.addEventListener(t,n,o)}function jr(e,t,n,o,i=null){const r=e._vei||(e._vei={}),a=r[t];if(o&&a)a.value=o;else{const[n,l]=function(e){let t;if(Lr.test(e)){let n;for(t={};n=e.match(Lr);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[Fe(e.slice(2)),t]}(t);if(o){const a=r[t]=function(e,t){const n=e=>{const o=e.timeStamp||Tr();(Er||o>=n.attached-1)&&dn(function(e,t){if(he(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map((e=>t=>!t._stopped&&e&&e(t)))}return t}(e,n.value),t,5,[e])};return n.value=e,n.attached=(()=>Pr||(Fr.then(Ir),Pr=Tr()))(),n}(o,i);Ar(e,n,a,l)}else a&&(!function(e,t,n,o){e.removeEventListener(t,n,o)}(e,n,a,l),r[t]=void 0)}}const Lr=/(?:Once|Passive|Capture)$/;const Rr=/^on[a-z]/;"undefined"!=typeof HTMLElement&&HTMLElement;const Mr="transition",Ur="animation",Vr=(e,{slots:t})=>function(e,t,n){const o=arguments.length;return 2===o?ye(t)&&!he(t)?ji(t)?Di(e,null,[t]):Di(e,t):Di(e,null,t):(o>3?n=Array.prototype.slice.call(arguments,2):3===o&&ji(n)&&(n=[n]),Di(e,t,n))}(fo,Br(e),t);Vr.displayName="Transition";const Dr={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Nr=(Vr.props=ue({},fo.props,Dr),(e,t=[])=>{he(e)?e.forEach((e=>e(...t))):e&&e(...t)}),qr=e=>!!e&&(he(e)?e.some((e=>e.length>1)):e.length>1);function Br(e){const t={};for(const n in e)n in Dr||(t[n]=e[n]);if(!1===e.css)return t;const{name:n="v",type:o,duration:i,enterFromClass:r=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:c=r,appearActiveClass:s=a,appearToClass:u=l,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=e,h=function(e){if(null==e)return null;if(ye(e))return[zr(e.enter),zr(e.leave)];{const t=zr(e);return[t,t]}}(i),v=h&&h[0],_=h&&h[1],{onBeforeEnter:m,onEnter:g,onEnterCancelled:b,onLeave:y,onLeaveCancelled:w,onBeforeAppear:x=m,onAppear:k=g,onAppearCancelled:S=b}=t,$=(e,t,n)=>{Wr(e,t?u:l),Wr(e,t?s:a),n&&n()},C=(e,t)=>{Wr(e,f),Wr(e,p),t&&t()},O=e=>(t,n)=>{const i=e?k:g,a=()=>$(t,e,n);Nr(i,[t,a]),Gr((()=>{Wr(t,e?c:r),Hr(t,e?u:l),qr(i)||Jr(t,o,v,a)}))};return ue(t,{onBeforeEnter(e){Nr(m,[e]),Hr(e,r),Hr(e,a)},onBeforeAppear(e){Nr(x,[e]),Hr(e,c),Hr(e,s)},onEnter:O(!1),onAppear:O(!0),onLeave(e,t){const n=()=>C(e,t);Hr(e,d),Qr(),Hr(e,p),Gr((()=>{Wr(e,d),Hr(e,f),qr(y)||Jr(e,o,_,n)})),Nr(y,[e,n])},onEnterCancelled(e){$(e,!1),Nr(b,[e])},onAppearCancelled(e){$(e,!0),Nr(S,[e])},onLeaveCancelled(e){C(e),Nr(w,[e])}})}function zr(e){return Me(e)}function Hr(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.add(t))),(e._vtc||(e._vtc=new Set)).add(t)}function Wr(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.remove(t)));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function Gr(e){requestAnimationFrame((()=>{requestAnimationFrame(e)}))}let Kr=0;function Jr(e,t,n,o){const i=e._endId=++Kr,r=()=>{i===e._endId&&o()};if(n)return setTimeout(r,n);const{type:a,timeout:l,propCount:c}=Zr(e,t);if(!a)return o();const s=a+"end";let u=0;const d=()=>{e.removeEventListener(s,p),r()},p=t=>{t.target===e&&++u>=c&&d()};setTimeout((()=>{u<c&&d()}),l+1),e.addEventListener(s,p)}function Zr(e,t){const n=window.getComputedStyle(e),o=e=>(n[e]||"").split(", "),i=o("transitionDelay"),r=o("transitionDuration"),a=Yr(i,r),l=o("animationDelay"),c=o("animationDuration"),s=Yr(l,c);let u=null,d=0,p=0;t===Mr?a>0&&(u=Mr,d=a,p=r.length):t===Ur?s>0&&(u=Ur,d=s,p=c.length):(d=Math.max(a,s),u=d>0?a>s?Mr:Ur:null,p=u?u===Mr?r.length:c.length:0);return{type:u,timeout:d,propCount:p,hasTransform:u===Mr&&/\b(transform|all)(,|$)/.test(n.transitionProperty)}}function Yr(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map(((t,n)=>Xr(t)+Xr(e[n]))))}function Xr(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function Qr(){return document.body.offsetHeight}new WeakMap,new WeakMap;const ea=ue({patchProp:(e,t,n,o,i=!1,r,a,l,c)=>{"class"===t?function(e,t,n){const o=e._vtc;o&&(t=(t?[t,...o]:[...o]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}(e,o,i):"style"===t?function(e,t,n){const o=e.style,i=ge(n);if(n&&!i){for(const e in n)Sr(o,e,n[e]);if(t&&!ge(t))for(const e in t)null==n[e]&&Sr(o,e,"")}else{const r=o.display;i?t!==n&&(o.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(o.display=r)}}(e,n,o):ce(t)?se(t)||jr(e,t,0,o,a):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):function(e,t,n,o){if(o)return"innerHTML"===t||"textContent"===t||!!(t in e&&Rr.test(t)&&me(n));if("spellcheck"===t||"draggable"===t||"translate"===t)return!1;if("form"===t)return!1;if("list"===t&&"INPUT"===e.tagName)return!1;if("type"===t&&"TEXTAREA"===e.tagName)return!1;if(Rr.test(t)&&ge(n))return!1;return t in e}(e,t,o,i))?function(e,t,n,o,i,r,a){if("innerHTML"===t||"textContent"===t)return o&&a(o,i,r),void(e[t]=null==n?"":n);if("value"===t&&"PROGRESS"!==e.tagName&&!e.tagName.includes("-")){e._value=n;const o=null==n?"":n;return e.value===o&&"OPTION"!==e.tagName||(e.value=o),void(null==n&&e.removeAttribute(t))}let l=!1;if(""===n||null==n){const o=typeof e[t];"boolean"===o?n=Z(n):null==n&&"string"===o?(n="",l=!0):"number"===o&&(n=0,l=!0)}try{e[t]=n}catch(e){}l&&e.removeAttribute(t)}(e,t,o,r,a,l,c):("true-value"===t?e._trueValue=o:"false-value"===t&&(e._falseValue=o),function(e,t,n,o,i){if(o&&t.startsWith("xlink:"))null==n?e.removeAttributeNS(Or,t.slice(6,t.length)):e.setAttributeNS(Or,t,n);else{const o=J(t);null==n||o&&!Z(n)?e.removeAttribute(t):e.setAttribute(t,o?"":n)}}(e,t,o,i))}},xr);let ta;function na(){return ta||(ta=function(e){return mi(e)}(ea))}function oa(e){if(ge(e)){return document.querySelector(e)}return e}var ia=function(e){return function(e){Kn=e}("data-v-1c84ca4a"),e=e(),Kn=null,e},ra={id:"bp_config"},aa={class:"bp_config_bg"},la={style:{"font-size":"20px"}},ca=ia((function(){return Vi("b",null,"bilibili视频下载 参数设置",-1)})),sa={style:{margin:"2% 0"}},ua=ia((function(){return Vi("label",null,"请求地址：",-1)})),da=["value"],pa=Bi("     "),fa=ia((function(){return Vi("label",null,"请求方式：",-1)})),ha=["value"],va=[ia((function(){return Vi("option",{value:"auto"},"自动判断",-1)})),ia((function(){return Vi("option",{value:"local"},"本地请求",-1)})),ia((function(){return Vi("option",{value:"online"},"远程请求",-1)}))],_a=ia((function(){return Vi("br",null,null,-1)})),ma=ia((function(){return Vi("small",null,"注意：普通使用请勿修改；默认使用混合请求",-1)})),ga={style:{margin:"2% 0"}},ba=ia((function(){return Vi("label",null,"视频格式：",-1)})),ya=["value"],wa=[ia((function(){return Vi("option",{value:"flv"},"FLV",-1)})),ia((function(){return Vi("option",{value:"dash"},"DASH",-1)})),ia((function(){return Vi("option",{value:"mp4"},"MP4",-1)}))],xa=Bi("     "),ka=ia((function(){return Vi("label",null,"切换CDN：",-1)})),Sa=["value"],$a=["value"],Ca=ia((function(){return Vi("br",null,null,-1)})),Oa=ia((function(){return Vi("small",null,"注意：仅video支持MP4；建议特殊地区或网络受限时切换（自行选择合适线路）",-1)})),Ta={style:{margin:"2% 0"}},Ea=ia((function(){return Vi("label",null,"下载方式：",-1)})),Pa=["value"],Fa=[zi('<option value="a" data-v-1c84ca4a>URL链接</option><option value="web" data-v-1c84ca4a>Web浏览器</option><option value="blob" data-v-1c84ca4a>Blob请求</option><option value="rpc" data-v-1c84ca4a>RPC接口</option><option value="aria" data-v-1c84ca4a>Aria命令</option>',5)],Ia=Bi("     "),Aa=ia((function(){return Vi("label",null,"AriaNg地址：",-1)})),ja=["value"],La=ia((function(){return Vi("br",null,null,-1)})),Ra=ia((function(){return Vi("small",null,"提示：url和web方式不会设置文件名",-1)})),Ma={style:{margin:"2% 0"}},Ua=ia((function(){return Vi("label",null,"RPC配置：[ 域名 : 端口 | 密钥 | 保存目录 ]",-1)})),Va=ia((function(){return Vi("br",null,null,-1)})),Da=["value"],Na=Bi(" : "),qa=["value"],Ba=Bi(" | "),za=["value"],Ha=Bi(" | "),Wa=["value"],Ga=ia((function(){return Vi("br",null,null,-1)})),Ka=ia((function(){return Vi("small",null,"注意：RPC默认使用Motrix（需要安装并运行）下载，其他软件请修改参数",-1)})),Ja={style:{margin:"2% 0"}},Za=ia((function(){return Vi("label",null,"强制换源：",-1)})),Ya=["value"],Xa=[ia((function(){return Vi("option",{value:"0"},"关闭",-1)})),ia((function(){return Vi("option",{value:"1"},"开启",-1)}))],Qa=Bi("     "),el=ia((function(){return Vi("label",null,"弹幕速度：",-1)})),tl=["value"],nl=Bi(" s     "),ol=ia((function(){return Vi("label",null,"弹幕字号：",-1)})),il=["value"],rl=Bi(" px "),al=ia((function(){return Vi("br",null,null,-1)})),ll=ia((function(){return Vi("small",null,"说明：使用请求到的视频地址在DPlayer进行播放；弹幕速度为弹幕滑过DPlayer的时间",-1)})),cl={style:{margin:"2% 0"}},sl=ia((function(){return Vi("label",null,"自动下载：",-1)})),ul=["value"],dl=[ia((function(){return Vi("option",{value:"0"},"关闭",-1)})),ia((function(){return Vi("option",{value:"1"},"开启",-1)}))],pl=ia((function(){return Vi("br",null,null,-1)})),fl=ia((function(){return Vi("small",null,"说明：请求地址成功后将自动点击下载视频按钮",-1)})),hl={style:{margin:"2% 0"}},vl=ia((function(){return Vi("label",null,"授权状态：",-1)})),_l=ia((function(){return Vi("select",{id:"auth",value:"{{config.auth}}",disabled:""},[Vi("option",{value:"0"},"未授权"),Vi("option",{value:"1"},"已授权")],-1)})),ml={style:{"text-align":"right"}},gl=ia((function(){return Vi("br",null,null,-1)}));var bl=n(44),yl=bl.config,wl=bl.hostMap,xl=Object.assign({},yl),kl={data:function(){var e=[];for(var t in wl)e.push({text:wl[t],value:t});return{default_config:xl,config:yl,host_key_options:e,help_clicked:!1}},methods:{save_config:function(){var e=JSON.parse(o.get("config_str"));o.set("config_str",JSON.stringify(yl)),$("#bp_config").hide(),$("#bp_config").css("opacity",0),i.show();for(var t=0,n=["base_api","format","auth"];t<n.length;t++){var r=n[t];if(yl[r]!==e[r]){$("#video_download").hide(),$("#video_download_2").hide();break}}yl.host_key!==e.host_key&&(W.refresh(),$("#video_url").attr("href","#"),$("#video_url_2").attr("href","#")),yl.rpc_domain!==e.rpc_domain&&(yl.rpc_domain.match("https://")||yl.rpc_domain.match(/(localhost|127\.0\.0\.1)/)||f("检测到当前RPC不是localhost本地接口，即将跳转到AriaNg网页控制台页面；请查看控制台RPC接口参数是否正确，第一次加载可能较慢请耐心等待；配置好后即可使用脚本进行远程下载<br/>使用期间不用关闭控制台页面！",(function(){V.open_ariang({domain:yl.rpc_domain,port:yl.rpc_port,token:yl.rpc_token})})));for(var a=0,l=["danmaku_speed","danmaku_fontsize"];a<l.length;a++){var c=l[a];if(yl[c]!==e[c]){E.danmaku.config();break}}},reset_config:function(){for(var e in xl)"auth"!==e&&(this.config[e]=xl[e])},show_help:function(){var e=this;this.help_clicked?p():(this.help_clicked=!0,v({url:"".concat(yl.base_api,"/auth/v2/?act=help"),dataType:"text"}).then((function(e){e?f(e):s("获取失败")})).finally((function(){return e.help_clicked=!1})))},show_login:function(e){z.login(e)},show_logout:function(){z.logout()},show_login_help:function(){h("进行授权之后将能在远程请求时享有用户账号原有的权益，例如能够请求用户已经付费或承包的番剧，是否需要授权？",(function(){z.login()}))}},created:function(){var e=o.get("config_str")||localStorage.getItem("my_config_str");if(e){var t=JSON.parse(e);for(var n in t)Object.hasOwnProperty.call(yl,n)&&(yl[n]=t[n])}else o.set("config_str",JSON.stringify(yl)),localStorage.setItem("my_config_str","");window.onbeforeunload=function(){var e=window.bp_aria2_window;e&&!e.closed&&e.close()}}},Sl=n(379),$l=n.n(Sl),Cl=n(795),Ol=n.n(Cl),Tl=n(569),El=n.n(Tl),Pl=n(565),Fl=n.n(Pl),Il=n(216),Al=n.n(Il),jl=n(589),Ll=n.n(jl),Rl=n(770),Ml={};Ml.styleTagTransform=Ll(),Ml.setAttributes=Fl(),Ml.insert=El().bind(null,"head"),Ml.domAPI=Ol(),Ml.insertStyleElement=Al();$l()(Rl.Z,Ml),Rl.Z&&Rl.Z.locals&&Rl.Z.locals;var Ul=(0,n(744).Z)(kl,[["render",function(e,t,n,o,i,r){return Oi(),Ii("div",ra,[Vi("div",aa,[Vi("span",la,[ca,Vi("b",null,[Vi("a",{href:"javascript:;",onClick:t[0]||(t[0]=function(e){return r.reset_config()})}," [重置] "),Vi("a",{style:{"text-decoration":"underline"},href:"javascript:;",onClick:t[1]||(t[1]=function(e){return r.show_help()})},"<通知/帮助>")])]),Vi("div",sa,[ua,Vi("input",{value:i.config.base_api,onInput:t[2]||(t[2]=function(e){return i.config.base_api=e.target.value}),style:{width:"30%"}},null,40,da),pa,fa,Vi("select",{value:i.config.request_type,onInput:t[3]||(t[3]=function(e){return i.config.request_type=e.target.value})},va,40,ha),_a,ma]),Vi("div",ga,[ba,Vi("select",{value:i.config.format,onInput:t[4]||(t[4]=function(e){return i.config.format=e.target.value})},wa,40,ya),xa,ka,Vi("select",{value:i.config.host_key,onInput:t[5]||(t[5]=function(e){return i.config.host_key=e.target.value})},[(Oi(!0),Ii(wi,null,Zi(i.host_key_options,(function(e){return Oi(),Ii("option",{value:e.value,key:e.text},(t=e.text,ge(t)?t:null==t?"":he(t)||ye(t)&&(t.toString===xe||!me(t.toString))?JSON.stringify(t,ne,2):String(t)),9,$a);var t})),128))],40,Sa),Ca,Oa]),Vi("div",Ta,[Ea,Vi("select",{value:i.config.download_type,onInput:t[6]||(t[6]=function(e){return i.config.download_type=e.target.value})},Fa,40,Pa),Ia,Aa,Vi("input",{value:i.config.ariang_host,onInput:t[7]||(t[7]=function(e){return i.config.ariang_host=e.target.value}),style:{width:"30%"}},null,40,ja),La,Ra]),Vi("div",Ma,[Ua,Va,Vi("input",{value:i.config.rpc_domain,onInput:t[8]||(t[8]=function(e){return i.config.rpc_domain=e.target.value}),style:{width:"25%"}},null,40,Da),Na,Vi("input",{value:i.config.rpc_port,onInput:t[9]||(t[9]=function(e){return i.config.rpc_port=e.target.value}),style:{width:"10%"}},null,40,qa),Ba,Vi("input",{value:i.config.rpc_token,onInput:t[10]||(t[10]=function(e){return i.config.rpc_token=e.target.value}),placeholder:"没有密钥不用填",style:{width:"15%"}},null,40,za),Ha,Vi("input",{value:i.config.rpc_dir,onInput:t[11]||(t[11]=function(e){return i.config.rpc_dir=e.target.value}),placeholder:"留空使用默认目录",style:{width:"20%"}},null,40,Wa),Ga,Ka]),Vi("div",Ja,[Za,Vi("select",{value:i.config.replace_force,onInput:t[12]||(t[12]=function(e){return i.config.replace_force=e.target.value})},Xa,40,Ya),Qa,el,Vi("input",{value:i.config.danmaku_speed,onInput:t[13]||(t[13]=function(e){return i.config.danmaku_speed=e.target.value}),style:{width:"5%"}},null,40,tl),nl,ol,Vi("input",{value:i.config.danmaku_fontsize,onInput:t[14]||(t[14]=function(e){return i.config.danmaku_fontsize=e.target.value}),style:{width:"5%"}},null,40,il),rl,al,ll]),Vi("div",cl,[sl,Vi("select",{value:i.config.auto_download,onInput:t[15]||(t[15]=function(e){return i.config.auto_download=e.target.value})},dl,40,ul),pl,fl]),Vi("div",hl,[vl,Hi('-id="auth"-'),_l,Vi("a",{class:"setting-context",href:"javascript:;",onClick:t[16]||(t[16]=function(e){return r.show_login()})},"账号授权"),Vi("a",{class:"setting-context",href:"javascript:;",onClick:t[17]||(t[17]=function(e){return r.show_logout()})},"取消授权"),Vi("a",{class:"setting-context",href:"javascript:;",onClick:t[18]||(t[18]=function(e){return r.show_login("0")})},"手动授权"),Vi("a",{class:"setting-context",href:"javascript:;",onClick:t[19]||(t[19]=function(e){return r.show_login_help()})},"这是什么？")]),Vi("div",ml,[gl,Vi("button",{class:"setting-button",onClick:t[20]||(t[20]=function(e){return r.save_config()})},"确定")])])])}],["__scopeId","data-v-1c84ca4a"]]);function Vl(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Dl=function(){function t(){var e=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.has_toolbar=!1,setTimeout((function(){e.run_before()}),1e3)}var n,r,a;return n=t,r=[{key:"run_before",value:function(){this.has_toolbar=this.set_toolbar(),this.has_toolbar&&this.run()}},{key:"set_toolbar",value:function(){var e;this.has_toolbar||($("#arc_toolbar_report")[0]?(e='<div id="arc_toolbar_report_2" style="margin-top:16px" class="video-toolbar report-wrap-module report-scroll-module" scrollshow="true"> <div class="ops"> <span id="setting_btn"> <i class="van-icon-general_addto_s"></i>脚本设置 </span> <span id="bilibili_parse"> <i class="van-icon-floatwindow_custome"></i>请求地址 </span> <span id="video_download" style="display:none"> <i class="van-icon-download"></i>下载视频 </span> <span id="video_download_2" style="display:none"> <i class="van-icon-download"></i>下载音频 </span> <span id="video_download_all"> <i class="van-icon-download"></i>批量下载 </span> </div> <div class="more"> <i class="van-icon-general_moreactions"></i> <div class="more-ops-list"> <ul> <li><span id="download_danmaku">下载弹幕</span></li> <li><span id="download_subtitle">下载字幕</span></li> </ul> </div> </div> </div> ',$("#arc_toolbar_report").after(e)):$("#toolbar_module")[0]?(e='<div id="toolbar_module_2" class="tool-bar clearfix report-wrap-module report-scroll-module media-info" scrollshow="true"> <div id="setting_btn" class="like-info"> <i class="iconfont icon-add"></i><span>脚本设置</span> </div> <div id="bilibili_parse" class="like-info"> <i class="iconfont icon-customer-serv"></i><span>请求地址</span> </div> <div id="video_download" class="like-info" style="display:none"> <i class="iconfont icon-download"></i><span>下载视频</span> </div> <div id="video_download_2" class="like-info" style="display:none"> <i class="iconfont icon-download"></i><span>下载音频</span> </div> <div id="video_download_all" class="like-info"> <i class="iconfont icon-download"></i><span>批量下载</span> </div> <div class="more">更多<div class="more-ops-list"> <ul> <li><span id="download_danmaku">下载弹幕</span></li> <li><span id="download_subtitle">下载字幕</span></li> </ul> </div> </div> <style>.tool-bar .more{float:right;cursor:pointer;color:#757575;font-size:16px;display:inline-block;transition:all .3s;position:relative;text-align:center}.tool-bar .more:hover .more-ops-list{display:block}.tool-bar:after{display:block;content:"";clear:both}.more-ops-list{display:none;position:absolute;width:80px;left:-65px;z-index:30;text-align:center;padding:10px 0;background:#fff;border:1px solid #e5e9ef;box-shadow:0 2px 4px 0 rgba(0,0,0,.14);border-radius:2px;font-size:14px;color:#222}.more-ops-list li{position:relative;height:34px;line-height:34px;cursor:pointer;transition:all .3s}.more-ops-list li:hover{color:#00a1d6;background:#e7e7e7}</style> </div> ',$("#toolbar_module").after(e)):$("div.video-toolbar")[0]&&(e='<div id="arc_toolbar_report_2" style="margin-top:16px" class="video-toolbar report-wrap-module report-scroll-module" scrollshow="true"> <div class="ops"> <span id="setting_btn"> <i class="van-icon-general_addto_s"></i>脚本设置 </span> <span id="bilibili_parse"> <i class="van-icon-floatwindow_custome"></i>请求地址 </span> <span id="video_download" style="display:none"> <i class="van-icon-download"></i>下载视频 </span> <span id="video_download_2" style="display:none"> <i class="van-icon-download"></i>下载音频 </span> <span id="video_download_all"> <i class="van-icon-download"></i>批量下载 </span> </div> <div class="more"> <i class="van-icon-general_moreactions"></i> <div class="more-ops-list"> <ul class="more-ops-list-box"> <li class="more-ops-list-box-li"> <span id="download_danmaku">下载弹幕</span> </li> <li class="more-ops-list-box-li"> <span id="download_subtitle">下载字幕</span> </li> </ul> </div> </div> </div> ',$("div.video-toolbar").after(e)),this.has_toolbar=!!e)}},{key:"run",value:function(){var t=document.createElement("div");t.id="bp_root",document.body.append(t);var n,r,a,l=document.getElementById(t.id);(n=document.createElement("div")).id="root_config",l.append(n),((...e)=>{const t=na().createApp(...e),{mount:n}=t;return t.mount=e=>{const o=oa(e);if(!o)return;const i=t._component;me(i)||i.render||i.template||(i.template=o.innerHTML),o.innerHTML="";const r=n(o,!1,o instanceof SVGElement);return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),r},t})(Ul).mount("#".concat(n.id)),$("body").append('<div class="message-bg"></div> <div id="message_box"> <div class="message_box_bg"> <span style="font-size:20px"><b>提示：</b></span> <div id="message_box_context" style="margin:2% 0">...</div><br/><br/> <div class="message_box_btn"> <button name="affirm">确定</button> <button name="cancel">取消</button> </div> </div> </div> <style>.message-bg{position:fixed;float:right;right:0;top:2%;z-index:30000}.message{margin-bottom:15px;padding:2% 2%;width:300px;display:flex;margin-top:-70px;opacity:0}.message-success{background-color:#dfd;border-left:6px solid #4caf50}.message-danger{background-color:#fdd;border-left:6px solid #f44336}.message-info{background-color:#e7f3fe;border-left:6px solid #0c86de}.message-warning{background-color:#ffc;border-left:6px solid #ffeb3b}.message-context{font-size:21px;word-wrap:break-word;word-break:break-all}.message-context p{margin:0}#message_box{opacity:0;display:none;position:fixed;inset:0px;top:0;left:0;width:100%;height:100%;z-index:20000}.message_box_bg{position:absolute;background:#fff;border-radius:10px;padding:20px;top:50%;left:50%;transform:translate(-50%,-50%);width:400px;box-shadow:rgb(0 0 0 / 70%) 0 0 0 1000px}.message_box_btn{text-align:right}.message_box_btn button{margin:0 5px;width:120px;height:40px;border-width:0;border-radius:3px;background:#1e90ff;cursor:pointer;outline:0;color:#fff;font-size:17px}.message_box_btn button:hover{background:#59f}</style> '),N.lazyInit(),z.initAuth(),z.checkLoginStatus(),W.refresh(),$("#".concat(t.id)).append('<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/dplayer@1.26.0/dist/DPlayer.min.js" crossorigin="true"><\/script>'),$("#".concat(t.id)).append('<a id="video_url" style="display:none;" target="_blank" referrerpolicy="origin" href="#"></a>'),$("#".concat(t.id)).append('<a id="video_url_2" style="display:none;" target="_blank" referrerpolicy="origin" href="#"></a>'),$("body").on("click","#setting_btn",(function(){for(var t in N.lazyInit(!0),e.config)$("#".concat(t)).val(e.config[t]);$("#bp_config").show(),$("#bp_config").animate({opacity:"1"},300),i.hide()})),$("body").on("click","#download_danmaku",(function(){var e=g.base();V.download_danmaku_ass(e.cid(),e.filename())})),$("body").on("click","#download_subtitle",(function(){V.download_subtitle_vtt(0,g.base().filename())})),$("body").on("click","#video_download_all",(function(){N.lazyInit(!0),o.get("auth_id")&&o.get("auth_sec")?"rpc"===e.config.download_type?V.download_all():h("仅支持使用RPC接口批量下载，请确保RPC环境正常，是否继续？",(function(){V.download_all()})):h("批量下载仅支持授权用户使用RPC接口下载，是否进行授权？",(function(){z.login()}))})),$("body").on("click","#video_download",(function(){var t=e.config.download_type;if("web"===t)$("#video_url")[0].click();else if("a"===t){var n=[$("#video_url").attr("href"),$("#video_url_2").attr("href")],o=n[1],i="建议使用IDM、FDM等软件安装其浏览器插件后，鼠标右键点击链接下载~<br/><br/>"+'<a href="'.concat(n[0],'" target="_blank" style="text-decoration:underline;">&gt视频地址&lt</a><br/><br/>')+("dash"===e.config.format?'<a href="'.concat(o,'" target="_blank" style="text-decoration:underline;">&gt音频地址&lt</a>'):"");f(i)}else if("aria"===t){var r,a,l=[$("#video_url").attr("href"),$("#video_url_2").attr("href")],u=l[0],d=l[1],p=g.base().filename();r=p+V.url_format(u),a=p+"_audio.mp4";var h='--header "User-Agent: '.concat(window.navigator.userAgent,'" --header "Referer: ').concat(window.location.href,'"'),v='aria2c "'.concat(u,'" --out "').concat(r,'" ').concat(h),_='aria2c "'.concat(d,'" --out "').concat(a,'" ').concat(h),m="点击文本框即可复制下载命令！<br/><br/>"+'视频：<br/><input id="aria2_code" value=\''.concat(v,'\' onclick="bp_clip_btn(\'aria2_code\')" style="width:100%;"></br></br>')+("dash"===e.config.format?'音频：<br/><input id="aria2_code_2" value=\''.concat(_,'\' onclick="bp_clip_btn(\'aria2_code_2\')" style="width:100%;"><br/><br/>')+'全部：<br/><textarea id="aria2_code_all" onclick="bp_clip_btn(\'aria2_code_all\')" style="min-width:100%;max-width:100%;min-height:100px;max-height:100px;">'.concat(v,"\n").concat(_,"</textarea>"):"");!window.bp_clip_btn&&(window.bp_clip_btn=function(e){$("#".concat(e)).select(),document.execCommand("copy")?c("复制成功"):s("复制失败")}),f(m)}else{var b=$("#video_url").attr("href"),y=g.base().filename();V.download(b,y,t)}})),$("body").on("click","#video_download_2",(function(){var t=e.config.download_type;if("web"===t)$("#video_url_2")[0].click();else if("a"===t)$("#video_download").click();else if("aria"===t)$("#video_download").click();else{var n=$("#video_url_2").attr("href"),o=g.base().filename();V.download(n,o,t)}})),$("body").on("click","#bilibili_parse",(function(){N.lazyInit(!0);var t=g.base(),n=[t.type,t.aid(),t.p(),t.cid(),t.epid()],i=n[0],l=n[1],s=n[2],u=n[3],f=n[4],h=g.get_quality().q;r="".concat(e.config.base_api,"?av=").concat(l,"&p=").concat(s,"&cid=").concat(u,"&ep=").concat(f,"&q=").concat(h,"&type=").concat(i,"&format=").concat(e.config.format,"&otype=json&_host=").concat(e.config.host_key,"&_req=").concat(e.config.request_type);var v=[o.get("auth_id"),o.get("auth_sec")],_=v[0],m=v[1];if("1"===e.config.auth&&_&&m&&(r+="&auth_id=".concat(_,"&auth_sec=").concat(m)),r!==a||"local"===e.config.request_type)$("#video_url").attr("href","#"),$("#video_url_2").attr("href","#"),a=r,d("开始请求"),x.get_url((function(n){if(n&&!n.code){c("请求成功"),n.times&&d("剩余请求次数：".concat(n.times));var o="dash"===e.config.format?n.video.replace("http://","https://"):n.url.replace("http://","https://"),i="dash"===e.config.format?n.audio.replace("http://","https://"):"#";$("#video_url").attr("href",o),$("#video_download").show(),"dash"===e.config.format&&($("#video_url_2").attr("href",i),$("#video_download_2").show()),(N.needReplace()||t.is_limited()||"1"===e.config.replace_force)&&E.replace_player(o,i),"1"===e.config.auto_download&&$("#video_download").click()}}));else{p();var b=$("#video_url").attr("href"),y=$("#video_url_2").attr("href");b&&"#"!==b&&($("#video_download").show(),"dash"===e.config.format&&$("#video_download_2").show(),(N.needReplace()||t.is_limited()||"1"===e.config.replace_force)&&!$("#bp_dplayer")[0]&&E.replace_player(b,y),"1"===e.config.auto_download&&$("#video_download").click())}})),$("body").on("click","a.router-link-active",(function(){this!==$('li[class="on"]').find("a")[0]&&W.refresh()})),$("body").on("click","li.ep-item",(function(){W.refresh()})),$("body").on("click","button.bilibili-player-iconfont-next",(function(){W.refresh()}));var u=E.bili_video_tag();$(u)[0]&&($(u)[0].onended=function(){W.refresh()}),$("body").on("click","li.bui-select-item",(function(){W.refresh()})),setInterval((function(){(W.q!==g.get_quality().q||"cheese"===g.type()&&W.epid!==g.base().epid())&&W.refresh()}),1e3),$("body").on("click",".rec-list",(function(){W.refresh()})),$("body").on("click",".bilibili-player-ending-panel-box-videos",(function(){W.refresh()})),setInterval((function(){var e=g.base();W.aid===e.aid()&&W.cid===e.cid()||W.refresh()}),3e3)}}],r&&Vl(n.prototype,r),a&&Vl(n,a),Object.defineProperty(n,"prototype",{writable:!1}),t}(),Nl=Dl;window.bp_fun_locked||(window.bp_fun_locked=!0,null==location.href.match(/^https:\/\/www\.mcbbs\.net\/template\/mcbbs\/image\/special_photo_bg\.png/)?$(".error-text")[0]||setTimeout((function(){console.log("\n".concat(" %c bilibili-parse-download.user.js v","2.1.0"," ").concat("68ebf69"," %c https://github.com/injahow/user.js ","\n","\n"),"color: #fadfa3; background: #030307; padding:5px 0;","background: #fadfa3; padding:5px 0;"),(new Nl).run()}),2e3):location.href.match("access_key")&&window!==window.parent&&(window.stop(),window.parent.postMessage("bilibili-parse-login-credentials: "+location.href,"*")))}()}();